{"ast":null,"code":"import React from\"react\";import{AppBar,Backdrop,CircularProgress,Container,CssBaseline,Grid,IconButton,List,TextField,Toolbar,Typography}from\"@material-ui/core\";import{Recorder}from'react-voice-recorder';import'react-voice-recorder/dist/index.css';import{EmojiTransportationOutlined,Send}from\"@material-ui/icons\";import axios from\"axios\";import ChatItem from\"../Components/ChatItem\";import $ from'jquery';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=require(\"twilio-chat\");require('dotenv').config();class ChatScreen extends React.Component{constructor(props){super(props);this.getToken=async email=>{// console.log(email);\nconst response=await axios.get(process.env.REACT_APP_BASE_URL+\"/chatAPI/token/\"+email);const{data}=response;return data.token;};this.componentDidMount=async()=>{$(document).ready(function(){$(\"._1ceqH ._1Yplu ._1Pz2d\").hide();$(\"._1ceqH ._1Yplu ._2gd2_\").hide();$(\"._1ceqH ._f2DT8\").hide();$(\"._1ceqH ._1Yplu ._1Pz2d\").hide();$(\"._1ceqH ._1Yplu ._2gd2_\").hide();$(\"._1ceqH ._f2DT8\").hide();});$(\"._1dpop\").click(function(){$(\".chat-cont-right .chat-footer .input-group .form-control\").hide();$(\".MuiIconButton-root\").hide();$(\"._1ceqH ._1Yplu ._1Pz2d\").show();$(\"._1ceqH ._1Yplu ._2gd2_\").show();$(\"._1ceqH ._f2DT8\").show();});this.setState({uname:this.props.name});this.setState({uimage:this.props.path});this.setState({sname:this.props.c_name});this.setState({simage:this.props.c_path});console.log(localStorage.getItem('customer_id'));console.log('');if(localStorage.getItem('customer_id')!=null){localStorage.setItem('globaluserid',localStorage.getItem('customer_id'));axios.get(process.env.REACT_APP_BASE_URL+\"/customerAPI/GetCustomerChatChannel?customer_id=\"+localStorage.getItem('customer_id')).then(res=>{this.setState({booking_chat_channel:res.data});if(res.data){this.setState({chatmasterName:'Dr.'+res.data[0]['first_name']+' '+res.data[0]['last_name']});this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id1'],\"spec_\"+res.data[0]['specialist_id'],res.data[0]['user_id']);this.setState({loading:true});}});}console.log('specialist_id');console.log(localStorage.getItem('specialist_id'));if(localStorage.getItem('specialist_id')!=null){localStorage.setItem('globalspecialistid',localStorage.getItem('specialist_id'));axios.get(process.env.REACT_APP_BASE_URL+\"/specilistAPI/GetSpecialistChatChannel?specialist_id=\"+localStorage.getItem('specialist_id')).then(res=>{this.setState({booking_chat_channel2:res.data});console.log('res.data3--->');console.log(res.data);if(res.data){this.setState({chatmasterName:res.data[0]['first_name']+' '+res.data[0]['last_name']});this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id2'],\"user_\"+res.data[0]['user_id'],res.data[0]['specialist_id']);this.setState({loading:true});}});}};this.joinChannel=async channel=>{if(channel.channelState.status!==\"joined\"){await channel.join();}console.log('first 6  step');console.log(channel);//const channel = await client.getChannelByUniqueName(room);\nchannel.on(\"messageAdded\",this.handleMessageAdded);// channel.unbind(\"messageAdded\", this.handleMessageAdded);  \n// console.log('first 7 step'); \n// channel.off('messageAdded', this.messageAdded); \n};// chatfunction = async(room, email) => {\n//   // const { location } = this.props;\n//   // const { state } = location || {};\n//   // const { email, room } = state || {};\n//   console.log(`/specilistAPI/GetUserQuery?payment_id=`+room);\n//  await axios.get(`/specilistAPI/GetUserQuery?payment_id=`+room)\n// \t.then(res => {\n//         console.log('specialist query');  console.log(res.data);\n//        if(res.data){\n//           this.setState({queryBox : true});  \n//           this.setState({queryString : res.data});  \n//           this.setState({queryTime : true});  \n//        }\n// \t}); \n//   let token = \"\";\n//   this.setState({emailOwner:email});\n//   // console.log('this.state.emailOwner' + email);\n//   // console.log(this.state.emailOwner);\n// // this.setState({triggerMessage:false});\n//   // if (!email || !room) {\n//   //  // this.props.history.replace(\"/\");\n//   // }\n//   // console.log('location'); console.log(location);\n//   // console.log('state'); console.log(state);\n//   // console.log('room'); console.log(room);\n//   console.log('first 1 step'); \n//   this.setState({ loading: true });  \n//   this.setState({ classAcitve: 'chat-scroll-avtive' }); \n//   try {\n//     token = await this.getToken(email);\n//     console.log('token new ');\n//     console.log(token);\n//  } catch {\n//     throw new Error(\"unable to get token, please reload this page\");\n//   } \n//   const client = await Chat.Client.create(token);\n//   console.log('client');\n//   console.log(client);\n//   client.on(\"tokenAboutToExpire\", async () => {\n//     const token = await this.getToken(email);\n//     client.updateToken(token);\n//   });\n//   client.on(\"tokenExpired\", async () => {\n//     const token = await this.getToken(email);\n//     client.updateToken(token);\n//   });\n//   client.on(\"channelJoined\", async (channel) => {\n//     // getting list of all messages since this is an existing channel\n//     const messages = await channel.getMessages();\n//     console.log('messages222');  \n//     console.log(messages);\n//     console.log('channel:');  \n//     console.log(channel); \n//     console.log('messages233332');  \n//     this.setState({ messages: messages.items || [] });\n//     this.scrollToBottom();\n//   }); \n//   console.log('first 2 step'); \n//   try {  \n//     console.log('first 2 step'+room);  \n//     const channel = await client.getChannelByUniqueName(room);\n//     console.log('first 3 step'); \n//     console.log(channel); \n//     await this.joinChannel(channel);\n//     this.setState({ channel, loading: false });\n//     this.setState({ classAcitve: 'chat-scroll' }); \n//   } catch {\n//     try {\n//       console.log('first try 4  step'); \n//       const channel = await client.createChannel({\n//         uniqueName: room,\n//         friendlyName: room,\n//       });\n//       console.log('first 4 step'); \n//       await this.joinChannel(channel);\n//       this.setState({ channel, loading: false });\n//       this.setState({ classAcitve: 'chat-scroll' }); \n//     } catch {\n//       throw new Error(\"unable to create channel, please reload this page\");\n//     }\n//   }\n// }\nthis.chatfunction=async(room,email,id,nextID)=>{// const { location } = this.props;\n// const { state } = location || {};\n// const { email, room } = state || {};\nvar string=id;console.log('chatscreen data');console.log(string);localStorage.setItem(\"onChangeId\",id);var string_first_concate=string.toString().split(\"_\")[0];var string_last_concate=string.toString().split(\"_\")[1];localStorage.getItem('globaluserid');localStorage.getItem('globalspecialistid');if(string_first_concate=='user'){axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(string_last_concate)).then(res=>{console.log('users data-----!');this.setState({ocname:res.data[0]['first_name']});this.setState({oclastname:res.data[0]['last_name']});if(res.data[0]['user_image']!=null)this.setState({ocimage:process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});this.setState({sname:res.data[0]['first_name']+' '+res.data[0]['last_name']});if(res.data[0]['user_image']!=null)this.setState({simage:process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});});// axios.get('/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(nextID))\n// .then(res => {\n//   console.log('specialist data');\n//   console.log(res);\n//       this.setState({uname : res.data[0]['first_name']+' '+res.data[0]['last_name']});  \n//       this.setState({uimage : '/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']}); \n//     });  \n}if(string_first_concate=='spec'){axios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(string_last_concate)).then(res=>{console.log('specialist data');console.log(res);this.setState({ocname:res.data[0]['first_name']});this.setState({oclastname:res.data[0]['last_name']});if(res.data[0]['profile_photo']!=null)this.setState({ocimage:process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']});this.setState({sname:res.data[0]['first_name']+' '+res.data[0]['last_name']});if(res.data[0]['profile_photo']!=null)this.setState({simage:process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']});});// axios.get('/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(nextID))\n// .then(res => {\n//   console.log('users data');\n//      this.setState({uname : res.data[0]['first_name']+' '+res.data[0]['last_name']}); \n//      this.setState({uimage : '/public/uploads/profile/'+res.data[0]['user_image']});\n//     });  \n}if(localStorage.getItem('globaluserid')!=null){axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(nextID)).then(res=>{console.log('users data');this.setState({uname:res.data[0]['first_name']+' '+res.data[0]['last_name']});if(res.data[0]['user_image']!=null)this.setState({uimage:process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});});}if(localStorage.getItem('globalspecialistid')!=null){axios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(localStorage.getItem('globalspecialistid'))).then(res=>{console.log('specialist data');console.log(res);this.setState({uname:res.data[0]['first_name']+' '+res.data[0]['last_name']});this.setState({uimage:process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']});});}console.log(\"/specilistAPI/GetUserQuery?payment_id=\"+room);await axios.get(process.env.REACT_APP_BASE_URL+\"/specilistAPI/GetUserQuery?payment_id=\"+room).then(res=>{console.log('specialist query');console.log(res.data);if(res.data!=null){if(res.data[0]['specialist_query']!='null')this.setState({queryBox:true});this.setState({queryString:res.data[0]['specialist_query']});if(res.data[0]['user_image']!=null)this.setState({userQueryImage:res.data[0]['user_image']});this.setState({queryTime:true});}});//null 'null'\nlet token=\"\";this.setState({emailOwner:email});// console.log('this.state.emailOwner' + email);\n// console.log(this.state.emailOwner);\n// this.setState({triggerMessage:false});\n// if (!email || !room) {\n//  // this.props.history.replace(\"/\");\n// }\n// console.log('location'); console.log(location);\n// console.log('state'); console.log(state);\n// console.log('room'); console.log(room);\nconsole.log('first 1 step');this.setState({loading:true});this.setState({classAcitve:'chat-scroll-avtive'});try{token=await this.getToken(email);console.log('token new ');console.log(token);}catch{throw new Error(\"unable to get token, please reload this page\");}const client=await Chat.Client.create(token);console.log('client');console.log(client);client.on(\"tokenAboutToExpire\",async()=>{const token=await this.getToken(email);client.updateToken(token);});client.on(\"tokenExpired\",async()=>{const token=await this.getToken(email);client.updateToken(token);});client.on(\"channelJoined\",async channel=>{console.log('messages1');// getting list of all messages since this is an existing channel\nconst messages=await channel.getMessages();console.log('messages');console.log(messages);this.setState({messages:messages.items||[]});//   console.log('messages Console'); \n//   console.log(messages);\n//  var fruites=[]; \n//   messages.items.forEach(message => {  \n//   if(message.type === 'media') \n//   {  \n//     message.media.getContentTemporaryUrl().then(function(url) { \n//     fruites.push(url); \n//   if(message.media.contentType==='image/png'||message.media.contentType==='image/jpeg')\n//   {\n//      localStorage.setItem('mediaurl'+message.sid,url); \n//   }\n//   else\n//   {\n//     localStorage.setItem('mediaurl'+message.sid,url+'&image=false'); \n//   }\n//   });\n//   } else { \n//   fruites.push('text'); \n//   localStorage.setItem('mediaurl'+message.sid,'text');\n//   this.setState({messageMedia:fruites || []}); \n//   } \n//   });\nthis.scrollToBottom();});console.log('first 2 step');try{console.log('first 2 step'+room);const channel=await client.getChannelByUniqueName(room);console.log('first 3 step');console.log(channel);await this.joinChannel(channel);this.setState({channel,loading:false});this.setState({classAcitve:'chat-scroll'});}catch{try{console.log('first try 4  step');const channel=await client.createChannel({uniqueName:room,friendlyName:room});console.log('first 4 step');await this.joinChannel(channel);this.setState({channel,loading:false});this.setState({classAcitve:'chat-scroll'});}catch{throw new Error(\"unable to create channel, please reload this page\");}}};this.handleMessageAdded=message=>{console.log('Final message');console.log(message.body);// console.log(message.media.state.contentType=='audio/webm');\nconsole.log('Final message Ebd');const{messages}=this.state;console.log('this.state222222-----');console.log('message.items true or false :');console.log(this.state.triggerMessage);console.log('this.authoer and owner-----');console.log(message.author);console.log(this.state.emailOwner);if(message.author!==this.state.emailOwner)// this.setState({triggerMessageSpecialist:true}); \nconsole.log('triggerMessageSpecialist-----');console.log(this.state.triggerMessageSpecialist);if(this.state.triggerMessageSpecialist){this.setState({messages:!!messages?[...messages,message]:[message]},this.scrollToBottom);console.log('Step111-----');console.log(this.state.messages);// message.body = ''; \nthis.setState({triggerMessageSpecialist:false});// this.setState({refreshPage:true}); \n}console.log('triggerMessage-----');console.log(this.state.triggerMessage);if(this.state.triggerMessage){this.setState({messages:!!messages?[...messages,message]:[message]},this.scrollToBottom);console.log('Step222-----');console.log(this.state.messages);// message.body = ''; \nthis.setState({triggerMessage:false});this.setState({triggerMessageSpecialist:true});}if(message.media!=null&&message.media.state.contentType=='audio/webm'){window.location.reload();}};this.scrollToBottom=()=>{const messages=document.getElementById('asc');let scrollHeight=messages.scrollHeight;let height=messages.clientHeight;let maxScrollTop=scrollHeight-height;messages.scrollTop=maxScrollTop>0?maxScrollTop:0;};// sendMessage = () => {\n//   this.setState({triggerMessage:true});\n//   console.log(\"fsdfsdssssssss----\"+this.state.triggerMessage);\n//   const { text, channel } = this.state;\n//   console.log(\"dfsdfsfdfsdff----\"+this.state.triggerMessage); \n//   console.log(String(text).trim()); \n//   if (text && String(text).trim()) {\n//     this.setState({ loading: true });\n//     channel && channel.sendMessage(text); \n//     this.setState({ text: \"\", loading: false });\n//     this.setState({triggerMessage:true});\n//     //channel.on(\"messageAdded\", this.handleMessageAdded); \n//     // channel.leave();\n//   } \n// };\nthis.sendMessage=()=>{// document.getElementById(\"recordings\").innerHTML = \"\"; \nthis.setState({recording_url:null});this.setState({image_preview:null});this.setState({triggerMessage:true});const{text,channel,image}=this.state;if(text&&String(text).trim()){this.setState({loading:true});channel&&channel.sendMessage(text);this.setState({text:\"\",loading:false});this.setState({triggerMessage:true});}else{//   if(document.getElementById('rimage').value===null || document.getElementById('rimage').value===undefined || document.getElementById('rimage').value==='')\n// { \nconst formData=new FormData();formData.append('file',document.getElementById('formInputFile')[0].files[0]);console.log('aaa');console.log(formData);channel.sendMessage(formData);//}\n// else\n// {\n// var audioBlob=document.getElementById('rimage2').value;\n// const str = \"http://localhost:3000/assets/img/doctors/doctor-thumb-02.jpg\";\n// // convert string to Buffer \n// channel.sendMessage(audioBlob);\n// }\n}};this.state={audioDetails:{url:null,blob:null,chunks:null,duration:{h:null,m:null,s:null}},text:\"\",messages:[],loading:false,channel:null,booking_chat_channel:[],triggerMessage:false,triggerMessageSpecialist:true,emailOwner:'',chatmasterName:\"\",booking_chat_channel:[],booking_chat_channel2:[],classAcitve:'chat-scroll',queryBox:false,queryString:'',queryTime:'',spec_image:'',ocname:'',oclastname:'',ocimage:'assets/img/doctors/doctor-thumb-02.jpg',uname:'',sname:'',uimage:'',simage:'',image_preview:null,searchvalue:'',userQueryImage:'assets/img/doctors/doctor-thumb-02.jpg',refreshPage:false,defaultImage:'assets/img/doctors/doctor-thumb-02.jpg'};this.scrollDiv=/*#__PURE__*/React.createRef();console.log('this.scrollDiv');console.log(this.scrollDiv);//console.log(\"localStorage.getItem('Channel')22222\");\n// console.log(props.id);\n}handleAudioStop(data){console.log(data);this.setState({audioDetails:data});}handleOnChange(value,audioname){console.log('handleOnChange');console.log(audioname);console.log(value);}async handleAudioUpload(file){console.log('uploaded file on twilio');console.log(file);this.state.channel.sendMessage({contentType:'audio/webm',media:file});await this.joinChannel(this.state.channel);}handleReset(){const reset={url:null,blob:null,chunks:null,duration:{h:0,m:0,s:0}};this.setState({audioDetails:reset});$(\".chat-cont-right .chat-footer .input-group .form-control\").show();$(\".MuiIconButton-root\").show();$(\"._1ceqH .1Yplu .1Pz2d\").hide();$(\"._1ceqH .1Yplu .2gd2_\").hide();$(\"._1ceqH .3bC73 .1YOWG ._3bC73 ._1Yplu\").hide();//window.location.reload();\n}handleChange(event){this.setState({searchvalue:event.target.value});}// handleChange1(event) {\n//   const [file] = event.target.files\n// if (file) {\n//    var  src = URL.createObjectURL(file)  \n//   this.setState({image_preview: src});\n// }\n// }\nhandleChange1(event){const[file]=event.target.files;if(file){var src=URL.createObjectURL(file);this.setState({image_preview:src});}}render(){const{loading,text,messages,channel}=this.state;// const { id,name,path,c_name,c_path} = this.props;\nconst{location}=this.props;const{state}=location||{};const id=this.props.id;//  name=this.props.name; \n// const path= this.props.path;\n// const c_name=this.props.c_name;\n// const c_path=this.props.c_path;\nconsole.log('loading');console.log(loading);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"chat-cont-left\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"chat-header\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Chats\"}),/*#__PURE__*/_jsx(\"a\",{href:\"javascript:void(0)\",class:\"chat-compose\",children:/*#__PURE__*/_jsx(\"i\",{class:\"material-icons\",children:\"control_point\"})})]}),/*#__PURE__*/_jsx(\"form\",{class:\"chat-search\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"input-group\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-search\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",placeholder:\"Search\",onChange:this.handleChange.bind(this)})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"chat-users-list\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"chat-scroll\",children:[this.state.booking_chat_channel.filter(channel=>{console.log('searching chating');console.log(channel);//return (this.state.searchvalue===null||this.state.searchvalue===undefined ||this.state.searchvalue==='')?channel:channel.first_name.toLowerCase()===this.state.searchvalue.toLowerCase();\nreturn this.state.searchvalue===null||this.state.searchvalue===undefined||this.state.searchvalue===''?channel:channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||(channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase());}).map(channel=>/*#__PURE__*/_jsxs(\"a\",{href:\"javascript:void(0);\",class:\"media\",onClick:()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id1'],'spec_'+channel['specialist_id'],channel['user_id']),children:[/*#__PURE__*/_jsx(\"div\",{class:\"media-img-wrap specilaist\",children:/*#__PURE__*/_jsx(\"div\",{class:\"avatar avatar-away \",id:\"user_part\",children:/*#__PURE__*/_jsx(\"img\",{src:channel['profile_photo']!=null?\"\".concat(process.env.REACT_APP_BASE_URL,\"/public/uploads/docs/profileresize/\").concat(channel['profile_photo']):this.state.defaultImage,alt:channel['first_name']+' '+channel['last_name'],class:\"avatar-img rounded-circle\"})})}),/*#__PURE__*/_jsxs(\"div\",{class:\"media-body\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"user-name\",children:[channel['first_name'],\" \",channel['last_name']]}),/*#__PURE__*/_jsx(\"div\",{class:\"user-last-chat\",children:channel['last_message']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{class:\"last-chat-time block\",children:\"0 min\"}),/*#__PURE__*/_jsx(\"div\",{class:\"badge badge-success badge-pill\",children:\"15\"})]})]})]})),this.state.booking_chat_channel2.filter(channel=>{return this.state.searchvalue===null||this.state.searchvalue===undefined||this.state.searchvalue===''?channel:channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||(channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase());}).map(channel=>/*#__PURE__*/_jsxs(\"a\",{href:\"javascript:void(0);\",class:\"media\",onClick:()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id2'],'user_'+channel['user_id'],channel['specialist_id']),children:[/*#__PURE__*/_jsx(\"div\",{class:\"media-img-wrap\",children:/*#__PURE__*/_jsx(\"div\",{class:\"avatar avatar-away\",id:\"specialist_part\",children:channel['user_image']&&channel['user_image']!=null?/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_BASE_URL,\"/public/uploads/profile/\").concat(channel['user_image']),alt:channel['first_name']+' '+channel['last_name'],class:\"avatar-img rounded-circle\"}):/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_URL,\"/assets/img/doctors/doctor-thumb-02.jpg\"),alt:\"User Image\",class:\"avatar-img rounded-circle\"})})}),/*#__PURE__*/_jsxs(\"div\",{class:\"media-body\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{class:\"user-name\",children:channel['first_name']+' '+channel['last_name']})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{class:\"last-chat-time block\",children:\"2 min\"}),/*#__PURE__*/_jsx(\"div\",{class:\"badge badge-success badge-pill\",children:\"15\"})]})]})]}))]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-cont-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-header\",children:[/*#__PURE__*/_jsx(\"a\",{id:\"back_user_list\",href:\"javascript:void(0)\",className:\"back-user-list\",children:/*#__PURE__*/_jsx(\"i\",{className:\"material-icons\",children:\"chevron_left\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"media\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"media-img-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"avatar avatar-online\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(this.state.ocimage),alt:\"User Image22\",class:\"avatar-img rounded-circle\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"media-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"user-name\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-name\",children:[\" \",this.state.ocname+' '+this.state.oclastname,/*#__PURE__*/_jsx(\"div\",{class:\"input-group-prepend\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"btn-file btn\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-paperclip\"}),/*#__PURE__*/_jsx(\"form\",{id:\"formInputFile\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"rimage\",onChange:this.handleChange1.bind(this)})})]})})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-body\",children:/*#__PURE__*/_jsxs(\"div\",{class:this.state.classAcitve,id:\"asc\",children:[this.state.queryBox&&this.state.queryBox!='null'?/*#__PURE__*/_jsxs(\"li\",{class:\"MuiListItem-root tets MuiListItem-gutters\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.author,children:[/*#__PURE__*/_jsx(\"div\",{class:\"avatar\",children:/*#__PURE__*/_jsx(\"img\",{src:this.state.userQueryImage,alt:\"User Image22\",class:\"avatar-img rounded-circle\"})}),this.state.ocname+' '+this.state.oclastname]}),this.state.queryString&&this.state.queryString!=null?/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[this.state.queryString&&this.state.queryString!=null?this.state.queryString:'',/*#__PURE__*/_jsx(\"div\",{class:\"chat-time\",children:this.state.queryString!=null?this.state.queryTime:''})]}):'']}),/*#__PURE__*/_jsx(\"div\",{})]}):'',messages&&messages.map(message=>/*#__PURE__*/_jsx(ChatItem,{message:message,email:this.state.emailOwner,id:id,name:this.state.emailOwner==message.author?this.state.uname:'goud deepak',path:this.state.emailOwner==message.author?this.state.uimage:'deepak goud',c_name:this.state.sname,c_path:this.state.simage},message.index))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-footer\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"input-group d-flex\",children:[/*#__PURE__*/_jsx(Recorder,{record:true,title:\"New recording\",audioURL:this.state.audioDetails.url,showUIAudio:true,handleAudioStop:data=>this.handleAudioStop(data),handleOnChange:value=>this.handleOnChange(value,'firstname'),handleAudioUpload:data=>this.handleAudioUpload(data),handleReset:()=>this.handleReset()}),this.state.image_preview===undefined||this.state.image_preview===null?/*#__PURE__*/_jsx(TextField,{id:\"text_field\",required:true,className:\"form-control box_sm\",placeholder:\"Type Here\",multiline:true,rows:2,value:text,disabled:!channel,onChange:event=>this.setState({text:event.target.value})}):/*#__PURE__*/_jsx(\"img\",{src:this.state.image_preview,style:{'height':'45px'},id:\"preview_image\"}),/*#__PURE__*/_jsx(IconButton,{style:styles.sendButton,onClick:this.sendMessage// disabled={!channel || !text}\n,children:/*#__PURE__*/_jsx(Send,{style:styles.sendIcon})})]})}),/*#__PURE__*/_jsx(\"div\",{})]})]});}}const styles={container:{maxWidth:\"75%\",borderRadius:12,padding:16,color:\"black\",fontSize:12,backgroundColor:\"#fff\"},textField:{width:\"100%\",borderWidth:0,borderColor:\"transparent\"},textFieldContainer:{flex:1,marginRight:12},gridItem:{paddingTop:12,paddingBottom:12},gridItemChatList:{overflow:\"auto\",height:\"70vh\"},gridItemMessage:{marginTop:12,marginBottom:12},sendButton:{backgroundColor:\"#0de0fe\"},sendIcon:{color:\"white\"},mainGrid:{paddingTop:100,borderWidth:1},author:{fontSize:10,color:\"gray\"}};export default ChatScreen;","map":{"version":3,"names":["React","AppBar","Backdrop","CircularProgress","Container","CssBaseline","Grid","IconButton","List","TextField","Toolbar","Typography","Recorder","EmojiTransportationOutlined","Send","axios","ChatItem","$","jsx","_jsx","jsxs","_jsxs","Chat","require","config","ChatScreen","Component","constructor","props","getToken","email","response","get","process","env","REACT_APP_BASE_URL","data","token","componentDidMount","document","ready","hide","click","show","setState","uname","name","uimage","path","sname","c_name","simage","c_path","console","log","localStorage","getItem","setItem","then","res","booking_chat_channel","chatmasterName","chatfunction","loading","booking_chat_channel2","joinChannel","channel","channelState","status","join","on","handleMessageAdded","room","id","nextID","string","string_first_concate","toString","split","string_last_concate","parseInt","ocname","oclastname","ocimage","queryBox","queryString","userQueryImage","queryTime","emailOwner","classAcitve","Error","client","Client","create","updateToken","messages","getMessages","items","scrollToBottom","getChannelByUniqueName","createChannel","uniqueName","friendlyName","message","body","state","triggerMessage","author","triggerMessageSpecialist","media","contentType","window","location","reload","getElementById","scrollHeight","height","clientHeight","maxScrollTop","scrollTop","sendMessage","recording_url","image_preview","text","image","String","trim","formData","FormData","append","files","audioDetails","url","blob","chunks","duration","h","m","s","spec_image","searchvalue","refreshPage","defaultImage","scrollDiv","createRef","handleAudioStop","handleOnChange","value","audioname","handleAudioUpload","file","handleReset","reset","handleChange","event","target","handleChange1","src","URL","createObjectURL","render","Fragment","children","class","href","type","placeholder","onChange","bind","filter","undefined","first_name","toLowerCase","includes","last_name","map","onClick","concat","alt","REACT_APP_URL","className","style","styles","container","index","record","title","audioURL","showUIAudio","required","multiline","rows","disabled","sendButton","sendIcon","maxWidth","borderRadius","padding","color","fontSize","backgroundColor","textField","width","borderWidth","borderColor","textFieldContainer","flex","marginRight","gridItem","paddingTop","paddingBottom","gridItemChatList","overflow","gridItemMessage","marginTop","marginBottom","mainGrid"],"sources":["C:/xampp/htdocs/medalohaback/medaloha_website/src/pages/Components/ChatScreen.js"],"sourcesContent":["import React from \"react\";\r\nimport {\r\n  AppBar,\r\n  Backdrop,\r\n  CircularProgress,\r\n  Container,\r\n  CssBaseline,\r\n  Grid,\r\n  IconButton,\r\n  List,\r\n  TextField,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport {Recorder} from 'react-voice-recorder'\r\nimport 'react-voice-recorder/dist/index.css'\r\nimport { EmojiTransportationOutlined, Send } from \"@material-ui/icons\";\r\nimport axios from \"axios\";\r\nimport ChatItem from \"../Components/ChatItem\";\r\nimport $ from 'jquery';\r\nconst Chat = require(\"twilio-chat\");\r\nrequire('dotenv').config();\r\n\r\nclass ChatScreen extends React.Component {\r\n  constructor(props) {\r\n    super(props); \r\n    this.state = {\r\n      audioDetails : {\r\n        url: null,\r\n        blob: null,\r\n        chunks: null,\r\n        duration: {\r\n        h: null,\r\n        m: null,\r\n        s: null,\r\n        }\r\n        },\r\n      text: \"\",\r\n      messages: [],\r\n      loading: false,\r\n      channel: null,\r\n      booking_chat_channel:[],\r\n      triggerMessage : false ,\r\n      triggerMessageSpecialist:true,\r\n      emailOwner:'',\r\n      chatmasterName :\"\",\r\n      booking_chat_channel:[],\r\n      booking_chat_channel2:[], \r\n      classAcitve:'chat-scroll',\r\n      queryBox:false,\r\n      queryString:'',\r\n      queryTime:'',\r\n      spec_image:'',\r\n      ocname:'',\r\n      oclastname:'',\r\n      ocimage:'assets/img/doctors/doctor-thumb-02.jpg',\r\n      uname :'',\r\n      sname:'',\r\n      uimage:'',\r\n      simage:'',\r\n      image_preview:null,\r\n      searchvalue:'',\r\n      userQueryImage:'assets/img/doctors/doctor-thumb-02.jpg',\r\n      refreshPage:false,\r\n      defaultImage:'assets/img/doctors/doctor-thumb-02.jpg',\r\n     \r\n    }; \r\n    this.scrollDiv = React.createRef();\r\n    console.log('this.scrollDiv');\r\n    console.log(this.scrollDiv);\r\n\r\n    //console.log(\"localStorage.getItem('Channel')22222\");\r\n\r\n   // console.log(props.id);\r\n   \r\n  }\r\n\r\n \r\n\r\n  getToken = async (email) => { \r\n   // console.log(email);\r\n    const response = await axios.get(process.env.REACT_APP_BASE_URL+`/chatAPI/token/`+email);\r\n    const { data } = response;\r\n    return data.token;\r\n  };\r\n\r\n  handleAudioStop(data) {\r\n    console.log(data)\r\n    this.setState({ audioDetails: data });\r\n  }\r\n\r\n\r\n\r\n  handleOnChange(value, audioname ){\r\n    console.log('handleOnChange');\r\n    console.log(audioname);\r\n     console.log(value);\r\n  }\r\n\r\n async handleAudioUpload(file) {\r\n    console.log('uploaded file on twilio')\r\n    console.log(file);\r\n\r\n    this.state.channel.sendMessage({\r\n        contentType: 'audio/webm',\r\n          media:file,\r\n      }); \r\n\r\n   await this.joinChannel(this.state.channel); \r\n   \r\n    \r\n}\r\n\r\nhandleReset() {\r\n  const reset = {\r\n    url: null,\r\n    blob: null,\r\n    chunks: null,\r\n    duration: {\r\n      h: 0,\r\n      m: 0,\r\n      s: 0\r\n    }\r\n  };\r\n\r\nthis.setState({ audioDetails: reset });\r\n\r\n$(\".chat-cont-right .chat-footer .input-group .form-control\").show();\r\n$(\".MuiIconButton-root\").show();\r\n\r\n$(\"._1ceqH .1Yplu .1Pz2d\").hide();\r\n$(\"._1ceqH .1Yplu .2gd2_\").hide();\r\n$(\"._1ceqH .3bC73 .1YOWG ._3bC73 ._1Yplu\").hide();\r\n //window.location.reload();\r\n\r\n}\r\n\r\n  handleChange(event) {\r\n    this.setState({searchvalue: event.target.value});\r\n  }\r\n\r\n  // handleChange1(event) {\r\n  //   const [file] = event.target.files\r\n  // if (file) {\r\n  //    var  src = URL.createObjectURL(file)  \r\n  //   this.setState({image_preview: src});\r\n  // }\r\n  // }\r\n\r\n\r\n  handleChange1(event) {   \r\n    const [file] = event.target.files\r\n    if (file) {\r\n      var  src = URL.createObjectURL(file) \r\n      this.setState({image_preview: src});\r\n    }\r\n }\r\n\r\n\r\n\r\n  componentDidMount = async () => {  \r\n\r\n\r\n     \r\n    $( document ).ready(function() {\r\n      $(\"._1ceqH ._1Yplu ._1Pz2d\").hide();\r\n      $(\"._1ceqH ._1Yplu ._2gd2_\").hide();\r\n      $(\"._1ceqH ._f2DT8\").hide();\r\n      $(\"._1ceqH ._1Yplu ._1Pz2d\").hide();\r\n       $(\"._1ceqH ._1Yplu ._2gd2_\").hide();\r\n       $(\"._1ceqH ._f2DT8\").hide();\r\n      });\r\n      \r\n      $(\"._1dpop\").click(function(){\r\n       $(\".chat-cont-right .chat-footer .input-group .form-control\").hide();\r\n       $(\".MuiIconButton-root\").hide();\r\n       $(\"._1ceqH ._1Yplu ._1Pz2d\").show();\r\n       $(\"._1ceqH ._1Yplu ._2gd2_\").show();\r\n        $(\"._1ceqH ._f2DT8\").show();\r\n      })\r\n    \r\n\r\n    this.setState({uname:this.props.name});\r\n    this.setState({uimage:this.props.path}); \r\n    this.setState({sname:this.props.c_name});\r\n    this.setState({simage:this.props.c_path}); \r\n    \r\n    console.log(localStorage.getItem('customer_id'));\r\n\r\n\r\n    console.log('');\r\n\r\n    if(localStorage.getItem('customer_id')!=null){\r\n      localStorage.setItem('globaluserid',localStorage.getItem('customer_id'));\r\n      axios.get(process.env.REACT_APP_BASE_URL+`/customerAPI/GetCustomerChatChannel?customer_id=`+localStorage.getItem('customer_id'))\r\n      .then(res => { \r\n           this.setState({booking_chat_channel : res.data});  \r\n           if(res.data){ \r\n            this.setState({chatmasterName:'Dr.' +res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n            this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id1'],\"spec_\"+res.data[0]['specialist_id'],res.data[0]['user_id']);\r\n            this.setState({ loading: true });  \r\n          }\r\n       });   \r\n    }\r\n\r\nconsole.log('specialist_id');\r\n    console.log(localStorage.getItem('specialist_id'));\r\n    if(localStorage.getItem('specialist_id')!=null){\r\n      localStorage.setItem('globalspecialistid',localStorage.getItem('specialist_id'));\r\n      axios.get(process.env.REACT_APP_BASE_URL+`/specilistAPI/GetSpecialistChatChannel?specialist_id=`+localStorage.getItem('specialist_id'))\r\n      .then(res => { \r\n           this.setState({booking_chat_channel2 : res.data});  \r\n            console.log('res.data3--->');  \r\n            console.log(res.data);  \r\n           if(res.data){ \r\n            this.setState({chatmasterName:res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n            this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id2'],\"user_\"+res.data[0]['user_id'],res.data[0]['specialist_id']);\r\n            this.setState({ loading: true });  \r\n          }\r\n       });   \r\n    } \r\n  };\r\n\r\n\r\n  \r\n\r\n \r\n  joinChannel = async (channel) => {\r\n      if (channel.channelState.status !== \"joined\") {\r\n        await channel.join();\r\n      }  \r\n      console.log('first 6  step');   \r\n  \r\n  console.log(channel);   \r\n  //const channel = await client.getChannelByUniqueName(room);\r\n\r\n\r\n      channel.on(\"messageAdded\", this.handleMessageAdded);\r\n     // channel.unbind(\"messageAdded\", this.handleMessageAdded);  \r\n     // console.log('first 7 step'); \r\n     // channel.off('messageAdded', this.messageAdded); \r\n  };\r\n\r\n\r\n  // chatfunction = async(room, email) => {\r\n\r\n  //   // const { location } = this.props;\r\n  //   // const { state } = location || {};\r\n  //   // const { email, room } = state || {};\r\n\r\n  //   console.log(`/specilistAPI/GetUserQuery?payment_id=`+room);\r\n\r\n  //  await axios.get(`/specilistAPI/GetUserQuery?payment_id=`+room)\r\n\t// \t.then(res => {\r\n  //         console.log('specialist query');  console.log(res.data);\r\n  //        if(res.data){\r\n  //           this.setState({queryBox : true});  \r\n  //           this.setState({queryString : res.data});  \r\n  //           this.setState({queryTime : true});  \r\n  //        }\r\n\t\t   \r\n\t// \t}); \r\n \r\n \r\n  //   let token = \"\";\r\n\r\n  //   this.setState({emailOwner:email});\r\n  //   // console.log('this.state.emailOwner' + email);\r\n  //   // console.log(this.state.emailOwner);\r\n  \r\n\r\n  // // this.setState({triggerMessage:false});\r\n\r\n  //   // if (!email || !room) {\r\n  //   //  // this.props.history.replace(\"/\");\r\n  //   // }\r\n  //   // console.log('location'); console.log(location);\r\n  //   // console.log('state'); console.log(state);\r\n  //   // console.log('room'); console.log(room);\r\n\r\n  //   console.log('first 1 step'); \r\n  //   this.setState({ loading: true });  \r\n  //   this.setState({ classAcitve: 'chat-scroll-avtive' }); \r\n  //   try {\r\n  //     token = await this.getToken(email);\r\n  //     console.log('token new ');\r\n  //     console.log(token);\r\n  //  } catch {\r\n  //     throw new Error(\"unable to get token, please reload this page\");\r\n  //   } \r\n  //   const client = await Chat.Client.create(token);\r\n\r\n  //   console.log('client');\r\n  //   console.log(client);\r\n\r\n  //   client.on(\"tokenAboutToExpire\", async () => {\r\n  //     const token = await this.getToken(email);\r\n  //     client.updateToken(token);\r\n  //   });\r\n\r\n  //   client.on(\"tokenExpired\", async () => {\r\n  //     const token = await this.getToken(email);\r\n  //     client.updateToken(token);\r\n  //   });\r\n\r\n  //   client.on(\"channelJoined\", async (channel) => {\r\n     \r\n  //     // getting list of all messages since this is an existing channel\r\n  //     const messages = await channel.getMessages();\r\n  //     console.log('messages222');  \r\n  //     console.log(messages);\r\n  //     console.log('channel:');  \r\n  //     console.log(channel); \r\n  //     console.log('messages233332');  \r\n  //     this.setState({ messages: messages.items || [] });\r\n  //     this.scrollToBottom();\r\n  //   }); \r\n\r\n  //   console.log('first 2 step'); \r\n\r\n  //   try {  \r\n  //     console.log('first 2 step'+room);  \r\n  //     const channel = await client.getChannelByUniqueName(room);\r\n  //     console.log('first 3 step'); \r\n  //     console.log(channel); \r\n  //     await this.joinChannel(channel);\r\n  //     this.setState({ channel, loading: false });\r\n  //     this.setState({ classAcitve: 'chat-scroll' }); \r\n  //   } catch {\r\n  //     try {\r\n  //       console.log('first try 4  step'); \r\n  //       const channel = await client.createChannel({\r\n  //         uniqueName: room,\r\n  //         friendlyName: room,\r\n  //       });\r\n  //       console.log('first 4 step'); \r\n  //       await this.joinChannel(channel);\r\n  //       this.setState({ channel, loading: false });\r\n  //       this.setState({ classAcitve: 'chat-scroll' }); \r\n  //     } catch {\r\n  //       throw new Error(\"unable to create channel, please reload this page\");\r\n  //     }\r\n  //   }\r\n  // }\r\n  \r\n\r\nchatfunction = async(room,email,id,nextID) => {\r\n\r\n    // const { location } = this.props;\r\n    // const { state } = location || {};\r\n    // const { email, room } = state || {};\r\n \r\n\r\nvar string=id;\r\nconsole.log('chatscreen data');\r\nconsole.log(string);\r\nlocalStorage.setItem(\"onChangeId\", id);\r\nvar string_first_concate=string.toString().split(\"_\")[0];\r\nvar string_last_concate=string.toString().split(\"_\")[1]; \r\n\r\nlocalStorage.getItem('globaluserid');\r\nlocalStorage.getItem('globalspecialistid');\r\n\r\n\r\n\r\nif(string_first_concate=='user')\r\n{\r\n\r\n    axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(string_last_concate))\r\n    .then(res => {\r\n          console.log('users data-----!');\r\n         this.setState({ocname : res.data[0]['first_name']}); \r\n         this.setState({oclastname : res.data[0]['last_name']}); \r\n         if(res.data[0]['user_image']!=null)\r\n         this.setState({ocimage : process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});\r\n         this.setState({sname : res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n         if(res.data[0]['user_image']!=null)\r\n         this.setState({simage : process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});\r\n        });  \r\n \r\n      // axios.get('/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(nextID))\r\n      // .then(res => {\r\n      //   console.log('specialist data');\r\n      //   console.log(res);\r\n      //       this.setState({uname : res.data[0]['first_name']+' '+res.data[0]['last_name']});  \r\n      //       this.setState({uimage : '/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']}); \r\n                    \r\n      //     });  \r\n}\r\n\r\n\r\n\r\nif(string_first_concate=='spec')\r\n{\r\n  axios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(string_last_concate))\r\n    .then(res => {\r\n          console.log('specialist data');\r\n          console.log(res);\r\n          this.setState({ocname : res.data[0]['first_name']}); \r\n          this.setState({oclastname : res.data[0]['last_name']});\r\n          if(res.data[0]['profile_photo']!=null)\r\n          this.setState({ocimage : process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']}); \r\n\r\n          this.setState({sname : res.data[0]['first_name']+' '+res.data[0]['last_name']});  \r\n          if(res.data[0]['profile_photo']!=null)\r\n          this.setState({simage : process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']}); \r\n                  \r\n        }); \r\n\r\n        // axios.get('/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(nextID))\r\n        // .then(res => {\r\n        //   console.log('users data');\r\n        //      this.setState({uname : res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n        //      this.setState({uimage : '/public/uploads/profile/'+res.data[0]['user_image']});\r\n\r\n\r\n        //     });  \r\n\r\n}\r\n\r\n\r\n\r\n\r\nif(localStorage.getItem('globaluserid')!=null){ \r\n  axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(nextID))\r\n  .then(res => {\r\n    console.log('users data');\r\n       this.setState({uname : res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n\r\n       if(res.data[0]['user_image']!=null)\r\n       this.setState({uimage : process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']}); \r\n\r\n\r\n      });  \r\n\r\n}\r\n\r\nif(localStorage.getItem('globalspecialistid')!=null){\r\naxios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(localStorage.getItem('globalspecialistid')))\r\n.then(res => {\r\nconsole.log('specialist data');\r\nconsole.log(res);\r\n    this.setState({uname : res.data[0]['first_name']+' '+res.data[0]['last_name']});  \r\n    this.setState({uimage : process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']}); \r\n            \r\n  });  \r\n}\r\n\r\n\r\n    console.log(`/specilistAPI/GetUserQuery?payment_id=`+room);\r\n\r\n   await axios.get(process.env.REACT_APP_BASE_URL+`/specilistAPI/GetUserQuery?payment_id=`+room)\r\n\t\t.then(res => {\r\n          console.log('specialist query');  \r\n          console.log(res.data);\r\n         if(res.data!=null){ \r\n           if(res.data[0]['specialist_query']!='null')\r\n            this.setState({queryBox : true});  \r\n\r\n            this.setState({queryString : res.data[0]['specialist_query']}); \r\n            if(res.data[0]['user_image']!=null)\r\n            this.setState({userQueryImage : res.data[0]['user_image']}); \r\n            this.setState({queryTime : true});  \r\n         }\r\n\t\t   \r\n\t\t}); \r\n \r\n\r\n //null 'null'\r\n \r\n    let token = \"\";\r\n\r\n    this.setState({emailOwner:email});\r\n    // console.log('this.state.emailOwner' + email);\r\n    // console.log(this.state.emailOwner);\r\n  \r\n\r\n  // this.setState({triggerMessage:false});\r\n\r\n    // if (!email || !room) {\r\n    //  // this.props.history.replace(\"/\");\r\n    // }\r\n    // console.log('location'); console.log(location);\r\n    // console.log('state'); console.log(state);\r\n    // console.log('room'); console.log(room);\r\n\r\n    console.log('first 1 step'); \r\n    this.setState({ loading: true });  \r\n    this.setState({ classAcitve: 'chat-scroll-avtive' }); \r\n    try {\r\n      token = await this.getToken(email)\r\n;\r\n      console.log('token new ');\r\n      console.log(token);\r\n   } catch {\r\n      throw new Error(\"unable to get token, please reload this page\");\r\n    } \r\n    const client = await Chat.Client.create(token);\r\n\r\n    console.log('client');\r\n    console.log(client);\r\n\r\n    client.on(\"tokenAboutToExpire\", async () => {\r\n      const token = await this.getToken(email)\r\n;\r\n      client.updateToken(token);\r\n    });\r\n\r\n    client.on(\"tokenExpired\", async () => {\r\n      const token = await this.getToken(email)\r\n;\r\n      client.updateToken(token);\r\n    });\r\n\r\n    client.on(\"channelJoined\", async (channel) => { \r\n     \r\n\r\n     console.log('messages1');\r\n      // getting list of all messages since this is an existing channel\r\n      const messages = await channel.getMessages(); \r\n\r\nconsole.log('messages');\r\nconsole.log(messages);\r\n\r\n\r\n      this.setState({ messages: messages.items || [] });\r\n\r\n    //   console.log('messages Console'); \r\n    //   console.log(messages);\r\n\r\n    //  var fruites=[]; \r\n            \r\n    //   messages.items.forEach(message => {  \r\n      \r\n    //   if(message.type === 'media') \r\n    //   {  \r\n    //     message.media.getContentTemporaryUrl().then(function(url) { \r\n    //     fruites.push(url); \r\n    //   if(message.media.contentType==='image/png'||message.media.contentType==='image/jpeg')\r\n    //   {\r\n    //      localStorage.setItem('mediaurl'+message.sid,url); \r\n    //   }\r\n    //   else\r\n    //   {\r\n    //     localStorage.setItem('mediaurl'+message.sid,url+'&image=false'); \r\n    //   }\r\n    //   });\r\n    //   } else { \r\n    //   fruites.push('text'); \r\n    //   localStorage.setItem('mediaurl'+message.sid,'text');\r\n    //   this.setState({messageMedia:fruites || []}); \r\n\r\n    //   } \r\n\r\n    //   });\r\n\r\n\r\n      this.scrollToBottom();\r\n    }); \r\n\r\n    console.log('first 2 step'); \r\n\r\n    try {  \r\n      console.log('first 2 step'+room);  \r\n      const channel = await client.getChannelByUniqueName(room);\r\n      console.log('first 3 step'); \r\n      console.log(channel); \r\n      await this.joinChannel(channel);\r\n      this.setState({ channel, loading: false });\r\n      this.setState({ classAcitve: 'chat-scroll' }); \r\n    } catch {\r\n      try {\r\n        console.log('first try 4  step'); \r\n        const channel = await client.createChannel({\r\n          uniqueName: room,\r\n          friendlyName: room,\r\n        });\r\n        console.log('first 4 step'); \r\n        await this.joinChannel(channel);\r\n        this.setState({ channel, loading: false });\r\n        this.setState({ classAcitve: 'chat-scroll' }); \r\n      } catch {\r\n        throw new Error(\"unable to create channel, please reload this page\");\r\n      }\r\n    }\r\n  }\r\n  \r\n\r\n  handleMessageAdded = (message) => { \r\n    console.log('Final message');\r\n    console.log(message.body);\r\n   // console.log(message.media.state.contentType=='audio/webm');\r\n    console.log('Final message Ebd');\r\n    const { messages } = this.state;\r\n     console.log('this.state222222-----');\r\n     console.log('message.items true or false :' );\r\n     console.log(this.state.triggerMessage); \r\n\r\n     console.log('this.authoer and owner-----');\r\n     console.log(message.author);\r\n     console.log(this.state.emailOwner);\r\n\r\n     if(message.author!==this.state.emailOwner) \r\n     \r\n      // this.setState({triggerMessageSpecialist:true}); \r\n\r\n\r\n      console.log('triggerMessageSpecialist-----'); \r\n      console.log(this.state.triggerMessageSpecialist);\r\n\r\n       if(this.state.triggerMessageSpecialist) {   \r\n        this.setState(\r\n          {\r\n            messages: !!messages ? [...messages, message] : [message],\r\n          },\r\n          this.scrollToBottom\r\n         );  \r\n         console.log('Step111-----'); \r\n         console.log(this.state.messages);\r\n        // message.body = ''; \r\n         this.setState({triggerMessageSpecialist:false}); \r\n        // this.setState({refreshPage:true}); \r\n     }\r\n\r\n\r\n     console.log('triggerMessage-----'); \r\n     console.log(this.state.triggerMessage);\r\n    if(this.state.triggerMessage) {   \r\n      this.setState(\r\n        {\r\n          messages: !!messages ? [...messages, message] : [message],\r\n        },\r\n        this.scrollToBottom\r\n       );  \r\n       console.log('Step222-----'); \r\n       console.log(this.state.messages);\r\n      // message.body = ''; \r\n       this.setState({triggerMessage:false}); \r\n       this.setState({triggerMessageSpecialist:true});  \r\n   }\r\n    \r\n\r\n   if(message.media!=null && message.media.state.contentType=='audio/webm'){\r\n      window.location.reload();\r\n   }\r\n   \r\n  };\r\n\r\n  scrollToBottom = () => {\r\n     const messages = document.getElementById('asc');\r\n     let scrollHeight = messages.scrollHeight;\r\n     let height = messages.clientHeight;\r\n     let maxScrollTop = scrollHeight - height;\r\n     messages.scrollTop = maxScrollTop > 0 ? maxScrollTop : 0;\r\n  };\r\n\r\n  // sendMessage = () => {\r\n  //   this.setState({triggerMessage:true});\r\n  //   console.log(\"fsdfsdssssssss----\"+this.state.triggerMessage);\r\n  //   const { text, channel } = this.state;\r\n  //   console.log(\"dfsdfsfdfsdff----\"+this.state.triggerMessage); \r\n  //   console.log(String(text).trim()); \r\n  //   if (text && String(text).trim()) {\r\n  //     this.setState({ loading: true });\r\n  //     channel && channel.sendMessage(text); \r\n  //     this.setState({ text: \"\", loading: false });\r\n  //     this.setState({triggerMessage:true});\r\n  //     //channel.on(\"messageAdded\", this.handleMessageAdded); \r\n  //     // channel.leave();\r\n  //   } \r\n  // };\r\n\r\n  sendMessage = () => {\r\n   // document.getElementById(\"recordings\").innerHTML = \"\"; \r\n    this.setState({recording_url:null});    \r\n    this.setState({image_preview:null});\r\n        this.setState({triggerMessage:true}); \r\n        const { text, channel,image } = this.state;  \r\n\r\n        if (text && String(text).trim()) {\r\n          this.setState({ loading: true }); \r\n           channel && channel.sendMessage(text);  \r\n           this.setState({ text: \"\", loading: false });\r\n           this.setState({triggerMessage:true}); \r\n        }   else  {\r\n \r\n//   if(document.getElementById('rimage').value===null || document.getElementById('rimage').value===undefined || document.getElementById('rimage').value==='')\r\n// { \r\n      const formData = new FormData();\r\n      formData.append('file', document.getElementById('formInputFile')[0].files[0]);\r\n      console.log('aaa');\r\n      console.log(formData); \r\n      channel.sendMessage(formData);\r\n//}\r\n// else\r\n// {\r\n \r\n// var audioBlob=document.getElementById('rimage2').value;\r\n// const str = \"http://localhost:3000/assets/img/doctors/doctor-thumb-02.jpg\";\r\n// // convert string to Buffer \r\n// channel.sendMessage(audioBlob);\r\n\r\n \r\n// }\r\n\r\n    }\r\n }\r\n\r\n\r\n  render() {\r\n    const { loading, text, messages, channel } = this.state;\r\n   // const { id,name,path,c_name,c_path} = this.props;\r\n    const { location } = this.props;\r\n    const { state } = location || {};  \r\n    const id= this.props.id;\r\n\r\n  \r\n\r\n    //  name=this.props.name; \r\n   // const path= this.props.path;\r\n   // const c_name=this.props.c_name;\r\n   // const c_path=this.props.c_path;\r\n \r\n\r\n    console.log('loading'); \r\n    console.log(loading);\r\n\r\n    return (\r\n      <React.Fragment>\r\n      <div class=\"chat-cont-left\">\r\n      <div class=\"chat-header\">\r\n        <span>Chats</span>\r\n        <a href=\"javascript:void(0)\" class=\"chat-compose\">\r\n          <i class=\"material-icons\">control_point</i>\r\n        </a>\r\n      </div>\r\n      <form class=\"chat-search\">\r\n        <div class=\"input-group\">\r\n          <div class=\"input-group-prepend\">\r\n            <i class=\"fas fa-search\"></i>\r\n          </div>\r\n          <input type=\"text\" class=\"form-control\" placeholder=\"Search\"  onChange={this.handleChange.bind(this)} />\r\n        </div>\r\n      </form>\r\n      <div class=\"chat-users-list\">\r\n      <div class=\"chat-scroll\" >  \r\n\r\n {this.state.booking_chat_channel.filter( (channel)=> {  \r\n    \tconsole.log('searching chating');\r\n      console.log(channel);\r\n //return (this.state.searchvalue===null||this.state.searchvalue===undefined ||this.state.searchvalue==='')?channel:channel.first_name.toLowerCase()===this.state.searchvalue.toLowerCase();\r\n return (this.state.searchvalue===null || this.state.searchvalue===undefined  ||this.state.searchvalue==='')?channel: (channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) || channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) ||  (channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase()));\r\n   }).map( (channel)=> ( \r\n      \r\n<a href=\"javascript:void(0);\" class=\"media\"  onClick={()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id1'],'spec_'+channel['specialist_id'],channel['user_id'])}>\r\n         <div class=\"media-img-wrap specilaist\">\r\n           <div class=\"avatar avatar-away \" id=\"user_part\">\r\n             <img src={channel['profile_photo']!=null?`${process.env.REACT_APP_BASE_URL}/public/uploads/docs/profileresize/${channel['profile_photo']}` : this.state.defaultImage} alt={channel['first_name'] +' '+channel['last_name']} class=\"avatar-img rounded-circle\" />\r\n           </div>\r\n         </div>\r\n         <div class=\"media-body\">\r\n           <div>\r\n             <div class=\"user-name\">{channel['first_name']} {channel['last_name']}</div> \r\n             <div class=\"user-last-chat\">\r\n                  {channel['last_message']} \r\n              </div>\r\n           </div>\r\n           <div>\r\n             <div class=\"last-chat-time block\">0 min</div>\r\n             <div class=\"badge badge-success badge-pill\">15</div>\r\n           </div>\r\n         </div>\r\n </a>\r\n\r\n\r\n))}\r\n\r\n\r\n{this.state.booking_chat_channel2.filter( (channel)=> {  \r\n return (this.state.searchvalue===null || this.state.searchvalue===undefined  ||this.state.searchvalue==='')?channel: (channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) || channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) ||  (channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase()));\r\n   }).map( (channel)=> (\t  \r\n             <a href=\"javascript:void(0);\" class=\"media\"  onClick={()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id2'],'user_'+channel['user_id'],channel['specialist_id'])}>\r\n                      <div class=\"media-img-wrap\">\r\n                         <div class=\"avatar avatar-away\" id=\"specialist_part\">\r\n                           {channel['user_image'] && channel['user_image']!=null ?\r\n                           <img src={`${process.env.REACT_APP_BASE_URL}/public/uploads/profile/${channel['user_image']}`} alt={channel['first_name'] +' '+channel['last_name']} class=\"avatar-img rounded-circle\" />:\r\n                           <img src={`${process.env.REACT_APP_URL}/assets/img/doctors/doctor-thumb-02.jpg`} alt=\"User Image\" class=\"avatar-img rounded-circle\" />\r\n                          }\r\n                         </div>\r\n                      </div>\r\n                      <div class=\"media-body\">\r\n                        <div>\r\n                          <div class=\"user-name\">{channel['first_name'] +' '+channel['last_name']}</div>\r\n                        </div>\r\n                        <div>\r\n                          <div class=\"last-chat-time block\">2 min</div>\r\n                          <div class=\"badge badge-success badge-pill\">15</div>\r\n                        </div>\r\n                      </div>\r\n              </a>\r\n\r\n      ))}\r\n\r\n              \r\n\r\n\r\n              \r\n        </div>\r\n       </div>\r\n    </div>\r\n    <div className=\"chat-cont-right\">\r\n   \r\n       \r\n    <div className=\"chat-header\">\r\n                  <a id=\"back_user_list\" href=\"javascript:void(0)\" className=\"back-user-list\">\r\n                    <i className=\"material-icons\">chevron_left</i>\r\n                  </a>\r\n                  <div className=\"media\">\r\n                    <div className=\"media-img-wrap\">\r\n                      <div className=\"avatar avatar-online\">\r\n                         <img src={`${this.state.ocimage}`} alt=\"User Image22\" class=\"avatar-img rounded-circle\" />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"media-body\">\r\n                      <div className=\"user-name\">  \r\n                       <div className=\"user-name\"\r\n                       > {this.state.ocname+' '+this.state.oclastname}\r\n                      \r\n                      \r\n                      <div class=\"input-group-prepend\">\r\n                        <div class=\"btn-file btn\">\r\n                          <i class=\"fa fa-paperclip\"></i>\r\n                          <form id=\"formInputFile\">\r\n                             <input type=\"file\" id=\"rimage\" onChange={this.handleChange1.bind(this)}/>  \r\n                          </form>\r\n                        </div>\r\n\r\n                         </div>\r\n                         \r\n                          </div>\r\n                       </div>\r\n                   \r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"input-group-prepend\"> \r\n                    </div>\r\n\r\n                 \r\n                </div>\r\n   \r\n  <div className=\"chat-body\">  \r\n    <div class={this.state.classAcitve}  id=\"asc\"> \r\n    {this.state.queryBox && this.state.queryBox!='null' ?\r\n    <li class=\"MuiListItem-root tets MuiListItem-gutters\"><div>\r\n        <div style={styles.author}>\r\n            <div class=\"avatar\">\r\n              <img src={this.state.userQueryImage} alt=\"User Image22\" class=\"avatar-img rounded-circle\" />\r\n            </div> \r\n            {this.state.ocname+' '+this.state.oclastname}\r\n         </div>\r\n         {(this.state.queryString && this.state.queryString!=null)  ?\r\n          <div style={styles.container}>\r\n              {(this.state.queryString && this.state.queryString!=null)  ? this.state.queryString  : '' } \r\n              <div class=\"chat-time\"> \r\n              {(this.state.queryString!=null)  ? this.state.queryTime  : '' }\r\n              </div>\r\n           </div>\r\n           : ''}\r\n     \r\n         </div>\r\n\r\n         <div>\r\n       \r\n      </div></li>:''\r\n      } \r\n\r\n\r\n\r\n   {messages &&  messages.map((message) => ( \r\n              \r\n                  <ChatItem\r\n                      key={message.index}\r\n                      message={message}\r\n                      email={this.state.emailOwner}\r\n                      id={id}\r\n                      name={this.state.emailOwner==message.author?this.state.uname:'goud deepak'}\r\n                      path={this.state.emailOwner==message.author?this.state.uimage:'deepak goud'}\r\n                      c_name={this.state.sname}\r\n                      c_path={this.state.simage} \r\n                  />\r\n              ))}  \r\n              </div>\r\n           </div> \r\n           <div className=\"chat-footer\">\r\n           <div class=\"input-group d-flex\"> \r\n           <Recorder\r\n            record={true}\r\n            title={\"New recording\"}\r\n            audioURL={this.state.audioDetails.url}\r\n            showUIAudio\r\n            handleAudioStop={data => this.handleAudioStop(data)}\r\n            handleOnChange={(value) => this.handleOnChange(value, 'firstname')}\r\n            handleAudioUpload={data => this.handleAudioUpload(data)}\r\n            handleReset={() => this.handleReset()}\r\n            /> \r\n\r\n             {(this.state.image_preview===undefined || this.state.image_preview===null)  ? <TextField id=\"text_field\" required className=\"form-control box_sm\" placeholder=\"Type Here\" multiline rows={2} value={text} disabled={!channel} onChange={(event) =>this.setState({ text: event.target.value })}/>:<img src={this.state.image_preview} style={{'height':'45px'}}   id=\"preview_image\" /> }\r\n\r\n              <IconButton\r\n                style={styles.sendButton}\r\n                onClick={this.sendMessage}\r\n                // disabled={!channel || !text}\r\n              >\r\n               <Send style={styles.sendIcon} />\r\n              </IconButton> \r\n              </div>\r\n              </div>\r\n    <div>\r\n\r\n  \r\n    </div>\r\n   </div>\r\n   \r\n    </React.Fragment>\r\n     \r\n    );\r\n  }\r\n}\r\n\r\nconst styles = {\r\n  container :{\r\n    maxWidth: \"75%\",\r\n    borderRadius: 12,\r\n    padding: 16,\r\n    color: \"black\",\r\n    fontSize: 12,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  textField: { width: \"100%\", borderWidth: 0, borderColor: \"transparent\" },\r\n  textFieldContainer: { flex: 1, marginRight: 12 },\r\n  gridItem: { paddingTop: 12, paddingBottom: 12 },\r\n  gridItemChatList: { overflow: \"auto\", height: \"70vh\" },\r\n  gridItemMessage: { marginTop: 12, marginBottom: 12 },\r\n  sendButton: { backgroundColor: \"#0de0fe\" },\r\n  sendIcon: { color: \"white\" },\r\n  mainGrid: { paddingTop: 100, borderWidth: 1 }, \r\n  author: { fontSize: 10, color: \"gray\" },\r\n};\r\n\r\n\r\n\r\nexport default ChatScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}