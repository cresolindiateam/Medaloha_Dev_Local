{"ast":null,"code":"import React from\"react\";import{AppBar,Backdrop,CircularProgress,Container,CssBaseline,Grid,IconButton,List,TextField,Toolbar,Typography}from\"@material-ui/core\";import{Recorder}from'react-voice-recorder';import'react-voice-recorder/dist/index.css';import{EmojiTransportationOutlined,Send}from\"@material-ui/icons\";import axios from\"axios\";import moment from'moment';import ChatItem from\"../Components/ChatItem\";import $ from'jquery';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=require(\"twilio-chat\");require('dotenv').config();class ChatScreen extends React.Component{constructor(props){super(props);this.getToken=async email=>{const response=await axios.get(process.env.REACT_APP_BASE_URL+\"/chatAPI/token/\"+email);const{data}=response;return data.token;};this.componentDidMount=async()=>{// const interval = setInterval(() => {\n//        // var specialsitId =localStorage.getItem('specialsit_id');\n//     this.getSpecialistStatus(69);  // Set isOnline to true\n//   }, 10000);\n$(document).ready(function(){$(\"._1ceqH ._1Yplu ._1Pz2d\").hide();$(\"._1ceqH ._1Yplu ._2gd2_\").hide();$(\"._1ceqH ._f2DT8\").hide();$(\"._1ceqH ._1Yplu ._1Pz2d\").hide();$(\"._1ceqH ._1Yplu ._2gd2_\").hide();$(\"._1ceqH ._f2DT8\").hide();});$(\"._1dpop\").click(function(){$(\".chat-cont-right .chat-footer .input-group .form-control\").hide();$(\".MuiIconButton-root\").hide();$(\"._1ceqH ._1Yplu ._1Pz2d\").show();$(\"._1ceqH ._1Yplu ._2gd2_\").show();$(\"._1ceqH ._f2DT8\").show();});this.setState({uname:this.props.name});this.setState({uimage:this.props.path});this.setState({sname:this.props.c_name});this.setState({simage:this.props.c_path});if(localStorage.getItem('customer_id')!=null){localStorage.setItem('globaluserid',localStorage.getItem('customer_id'));axios.get(process.env.REACT_APP_BASE_URL+\"/customerAPI/GetCustomerChatChannel?customer_id=\"+localStorage.getItem('customer_id')).then(res=>{this.setState({booking_chat_channel:res.data});if(res.data){this.setState({chatmasterName:'Dr.'+res.data[0]['first_name']+' '+res.data[0]['last_name']});this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id1'],\"spec_\"+res.data[0]['specialist_id'],res.data[0]['user_id']);this.setState({loading:true});}});}if(localStorage.getItem('specialist_id')!=null){localStorage.setItem('globalspecialistid',localStorage.getItem('specialist_id'));axios.get(process.env.REACT_APP_BASE_URL+\"/specilistAPI/GetSpecialistChatChannel?specialist_id=\"+localStorage.getItem('specialist_id')).then(res=>{this.setState({booking_chat_channel2:res.data});if(res.data){this.setState({chatmasterName:res.data[0]['first_name']+' '+res.data[0]['last_name']});this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id2'],\"user_\"+res.data[0]['user_id'],res.data[0]['specialist_id']);this.setState({loading:true});}});}};this.joinChannel=async channel=>{if(channel.channelState.status!==\"joined\"){await channel.join();}channel.on(\"messageAdded\",this.handleMessageAdded);};this.chatfunction=async(room,email,id,nextID)=>{var string=id;localStorage.setItem(\"onChangeId\",id);var string_first_concate=string.toString().split(\"_\")[0];var string_last_concate=string.toString().split(\"_\")[1];localStorage.getItem('globaluserid');localStorage.getItem('globalspecialistid');if(string_first_concate=='user'){axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(string_last_concate)).then(res=>{this.setState({ocname:res.data[0]['first_name']});this.setState({oclastname:res.data[0]['last_name']});if(res.data[0]['user_image']!=null)this.setState({ocimage:process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});this.setState({sname:res.data[0]['first_name']+' '+res.data[0]['last_name']});if(res.data[0]['user_image']!=null)this.setState({simage:process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});});}if(string_first_concate=='spec'){axios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(string_last_concate)).then(res=>{this.setState({ocname:res.data[0]['first_name']});this.setState({oclastname:res.data[0]['last_name']});if(res.data[0]['profile_photo']!=null)this.setState({ocimage:process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']});this.setState({sname:res.data[0]['first_name']+' '+res.data[0]['last_name']});if(res.data[0]['profile_photo']!=null)this.setState({simage:process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']});});}if(localStorage.getItem('globaluserid')!=null){axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(nextID)).then(res=>{this.setState({uname:res.data[0]['first_name']+' '+res.data[0]['last_name']});if(res.data[0]['user_image']!=null)this.setState({uimage:process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});});}if(localStorage.getItem('globalspecialistid')!=null){axios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(localStorage.getItem('globalspecialistid'))).then(res=>{this.setState({uname:res.data[0]['first_name']+' '+res.data[0]['last_name']});this.setState({uimage:process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']});});}await axios.get(process.env.REACT_APP_BASE_URL+\"/specilistAPI/GetUserQuery?payment_id=\"+room).then(res=>{if(res.data!=null){if(res.data[0]['specialist_query']!='null')this.setState({queryBox:true});this.setState({queryString:res.data[0]['specialist_query']});if(res.data[0]['user_image']!=null)this.setState({userQueryImage:res.data[0]['user_image']});this.setState({queryTime:true});}});//null 'null'\nlet token=\"\";this.setState({emailOwner:email});this.setState({loading:true});this.setState({classAcitve:'chat-scroll-avtive'});try{token=await this.getToken(email);}catch{throw new Error(\"unable to get token, please reload this page\");}const client=await Chat.Client.create(token);console.log(\"client created\");console.log(client);client.on(\"tokenAboutToExpire\",async()=>{const token=await this.getToken(email);client.updateToken(token);});client.on(\"tokenExpired\",async()=>{const token=await this.getToken(email);client.updateToken(token);});client.on(\"channelJoined\",async channel=>{console.log(\"channel joined\");// getting list of all messages since this is an existing channel\nconst messages=await channel.getMessages();console.log(messages);this.setState({messages:messages.items||[]});this.scrollToBottom();});try{const channel=await client.getChannelByUniqueName(room);console.log(\"existing channel\");console.log(room);await this.joinChannel(channel);this.setState({channel,loading:false});this.setState({classAcitve:'chat-scroll'});}catch{try{console.log(\"room ajay\");console.log(room);// if(channel!==null)\nconsole.log(\"channel\");const channel=await client.createChannel({uniqueName:room,friendlyName:room});console.log(channel);await this.joinChannel(channel);this.setState({channel,loading:false});this.setState({classAcitve:'chat-scroll'});}catch(error){console.error(\"Error creating channel:\",error);// Log specific error properties for further investigation\nif(error.code){console.error(\"Error Code:\",error.code);}if(error.message){console.error(\"Error Message:\",error.message);}console.log(\"unable to create channel, please reload this page\"+error);}}};this.handleMessageAdded=message=>{const{messages}=this.state;if(message.author!==this.state.emailOwner)if(this.state.triggerMessageSpecialist){this.setState({messages:!!messages?[...messages,message]:[message]},this.scrollToBottom);this.setState({triggerMessageSpecialist:false});}if(this.state.triggerMessage){this.setState({messages:!!messages?[...messages,message]:[message]},this.scrollToBottom);// message.body = ''; \nthis.setState({triggerMessage:false});this.setState({triggerMessageSpecialist:true});}if(message.media!=null&&message.media.state.contentType=='audio/webm'){window.location.reload();}};this.scrollToBottom=()=>{const messages=document.getElementById('asc');let scrollHeight=messages.scrollHeight;let height=messages.clientHeight;let maxScrollTop=scrollHeight-height;messages.scrollTop=maxScrollTop>0?maxScrollTop:0;};this.sendMessage=()=>{this.setState({recording_url:null});this.setState({image_preview:null});const{text,channel,image}=this.state;if(text&&String(text).trim()){console.log(\"Sending message\");this.setState({loading:true},()=>{console.log(\"Loading state set to true\");});channel&&channel.sendMessage(text).then(()=>{this.setState({text:\"\",loading:false},()=>{console.log(\"Text reset and loading state set to false\");});this.setState({triggerMessage:true},()=>{console.log(\"Trigger message set to true\");});}).catch(error=>{console.error(\"Error sending message:\",error);});}else{const formData=new FormData();formData.append('file',document.getElementById('formInputFile')[0].files[0]);channel.sendMessage(formData);}};this.state={audioDetails:{url:null,blob:null,chunks:null,duration:{h:null,m:null,s:null}},text:\"\",messages:[],loading:false,channel:null,booking_chat_channel:[],triggerMessage:false,triggerMessageSpecialist:true,emailOwner:'',chatmasterName:\"\",booking_chat_channel:[],booking_chat_channel2:[],classAcitve:'chat-scroll',queryBox:false,queryString:'',queryTime:'',spec_image:'',ocname:'',oclastname:'',ocimage:'assets/img/doctors/doctor-thumb-02.jpg',uname:'',sname:'',uimage:'',simage:'',image_preview:null,searchvalue:'',userQueryImage:'assets/img/doctors/doctor-thumb-02.jpg',refreshPage:false,defaultImage:'assets/img/doctors/doctor-thumb-02.jpg',specialist_login_time:'avatar avatar-away'};this.scrollDiv=/*#__PURE__*/React.createRef();}handleAudioStop(data){console.log(data);this.setState({audioDetails:data});}handleOnChange(value,audioname){console.log(\"ajaysoni\");}async handleAudioUpload(file){console.log('uploaded file on twilio');console.log(file);this.state.channel.sendMessage({contentType:'audio/webm',media:file});await this.joinChannel(this.state.channel);}handleReset(){const reset={url:null,blob:null,chunks:null,duration:{h:0,m:0,s:0}};this.setState({audioDetails:reset});$(\".chat-cont-right .chat-footer .input-group .form-control\").show();$(\".MuiIconButton-root\").show();$(\"._1ceqH .1Yplu .1Pz2d\").hide();$(\"._1ceqH .1Yplu .2gd2_\").hide();$(\"._f2DT8\").hide();// const elementWithClass = document.querySelector('._1dpop'); // Replace 'your-class-name' with the actual class name you want to check\n//    if (elementWithClass) {\n//      $(\"._1Yplu\").hide(); // Hide the recorder if the class exists\n//    }\n//    else\n//    {\n//      $(\"._1Yplu\").show();\n//    }\n$(\"._1ceqH .3bC73 .1YOWG ._3bC73 ._1Yplu\").hide();//window.location.reload();\n}handleChange(event){this.setState({searchvalue:event.target.value});}handleChange1(event){const[file]=event.target.files;if(file){var src=URL.createObjectURL(file);this.setState({image_preview:src});}}getSpecialistStatus(specialistId){axios.get(process.env.REACT_APP_BASE_URL+\"/authenticationAPI/getspecialistStatus?specialistId=\"+specialistId).then(res=>{if(parseInt(res.data)>parseInt(Date.now())){this.setState({specialist_login_time:'avatar avatar-green'});}else{this.setState({specialist_login_time:'avatar avatar-away'});}});}componentWillUnmount(){if(this.state.channel){this.state.channel.removeListener(\"messageAdded\",this.handleMessageAdded);}}render(){const{loading,text,messages,channel}=this.state;// const { id,name,path,c_name,c_path} = this.props;\nconst{location}=this.props;const{state}=location||{};const id=this.props.id;//  name=this.props.name; \n// const path= this.props.path;\n// const c_name=this.props.c_name;\n// const c_path=this.props.c_path;\n// console.log('loading'); \n// console.log(loading);\nreturn/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-cont-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Chats\"})}),/*#__PURE__*/_jsx(\"form\",{className:\"chat-search\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Search\",onChange:this.handleChange.bind(this)})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-users-list\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat-scroll\",children:[this.state.booking_chat_channel.filter(channel=>{//return (this.state.searchvalue===null||this.state.searchvalue===undefined ||this.state.searchvalue==='')?channel:channel.first_name.toLowerCase()===this.state.searchvalue.toLowerCase();\nreturn this.state.searchvalue===null||this.state.searchvalue===undefined||this.state.searchvalue===''?channel:channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||(channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase());}).map(channel=>/*#__PURE__*/_jsxs(\"a\",{href:\"javascript:void(0);\",className:\"media\",onClick:()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id1'],'spec_'+channel['specialist_id'],channel['user_id']),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"media-img-wrap specilaist\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"demopart\",children:setInterval(()=>{this.getSpecialistStatus(channel['specialist_id']);},60000*1.2)}),/*#__PURE__*/_jsx(\"div\",{className:this.state.specialist_login_time,id:\"user_part\",children:/*#__PURE__*/_jsx(\"img\",{src:channel['profile_photo']!=null?\"\".concat(process.env.REACT_APP_BASE_URL,\"/public/uploads/docs/profileresize/\").concat(channel['profile_photo']):this.state.defaultImage,alt:channel['first_name']+' '+channel['last_name'],className:\"avatar-img rounded-circle\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-body\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-name\",children:[channel['first_name'],\" \",channel['last_name']]}),/*#__PURE__*/_jsx(\"div\",{className:\"user-name\",children:localStorage.getItem('UserTimezone')!=null?moment.utc(channel['session_date']).tz(localStorage.getItem('UserTimezone')).format('D MMM YYYY h:mm A'):moment(channel['session_date']).format('D MMM YYYY h:mm A')}),/*#__PURE__*/_jsx(\"div\",{className:\"user-last-chat\",children:channel['last_message']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"last-chat-time block\"}),/*#__PURE__*/_jsx(\"div\",{className:\"badge badge-success badge-pill\"})]})]})]})),this.state.booking_chat_channel2.filter(channel=>{return this.state.searchvalue===null||this.state.searchvalue===undefined||this.state.searchvalue===''?channel:channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||(channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase());}).map(channel=>/*#__PURE__*/_jsxs(\"a\",{href:\"javascript:void(0);\",className:\"media\",onClick:()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id2'],'user_'+channel['user_id'],channel['specialist_id']),children:[/*#__PURE__*/_jsx(\"div\",{className:\"media-img-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"avatar avatar-away\",id:\"specialist_part\",children:channel['user_image']&&channel['user_image']!=null?/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_BASE_URL,\"/public/uploads/profile/\").concat(channel['user_image']),alt:channel['first_name']+' '+channel['last_name'],className:\"avatar-img rounded-circle\"}):/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_URL,\"/assets/img/doctors/doctor-thumb-02.jpg\"),alt:\"User Image\",className:\"avatar-img rounded-circle\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-body\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-name\",children:channel['first_name']+' '+channel['last_name']}),/*#__PURE__*/_jsx(\"div\",{className:\"user-name\",children:localStorage.getItem('UserTimezone')!=null?moment.utc(channel['session_date']).tz(localStorage.getItem('UserTimezone')).format('D MMM YYYY h:mm A'):moment(channel['session_date']).format('D MMM YYYY h:mm A')})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"last-chat-time block\"}),/*#__PURE__*/_jsx(\"div\",{className:\"badge badge-success badge-pill\"})]})]})]}))]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-cont-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-header\",children:[/*#__PURE__*/_jsx(\"a\",{id:\"back_user_list\",href:\"javascript:void(0)\",className:\"back-user-list\",children:/*#__PURE__*/_jsx(\"i\",{className:\"material-icons\",children:\"chevron_left\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"media\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"media-img-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:this.state.specialist_login_time,children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(this.state.ocimage),alt:\"User Image22\",className:\"avatar-img rounded-circle\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"media-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"user-name\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-name\",children:[\" \",this.state.ocname+' '+this.state.oclastname,/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-file btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-paperclip\"}),/*#__PURE__*/_jsx(\"form\",{id:\"formInputFile\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"rimage\",onChange:this.handleChange1.bind(this)})})]})})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:this.state.classAcitve,id:\"asc\",children:[this.state.queryBox&&this.state.queryBox!='null'?/*#__PURE__*/_jsxs(\"li\",{className:\"MuiListItem-root tets MuiListItem-gutters\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.author,children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar\",children:/*#__PURE__*/_jsx(\"img\",{src:this.state.userQueryImage,alt:\"User Image22\",className:\"avatar-img rounded-circle\"})}),this.state.ocname+' '+this.state.oclastname]}),this.state.queryString&&this.state.queryString!=null?/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[this.state.queryString&&this.state.queryString!=null&&this.state.queryString!=null?this.state.queryString:'',/*#__PURE__*/_jsx(\"div\",{className:\"chat-time\",children:this.state.queryString!=null?this.state.queryTime:''})]}):'']}),/*#__PURE__*/_jsx(\"div\",{})]}):'',messages&&messages.map(message=>/*#__PURE__*/_jsx(ChatItem,{message:message,email:this.state.emailOwner,id:id,name:this.state.emailOwner==message.author?this.state.uname:'goud deepak',path:this.state.emailOwner==message.author?this.state.uimage:'deepak goud',c_name:this.state.sname,c_path:this.state.simage},message.index))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group d-flex \",children:[/*#__PURE__*/_jsx(Recorder,{record:true,title:\"New recording\",audioURL:this.state.audioDetails.url,showUIAudio:true,handleAudioStop:data=>this.handleAudioStop(data),handleOnChange:value=>this.customFunction(),handleAudioUpload:data=>this.handleAudioUpload(data),handleReset:()=>this.handleReset()}),this.state.image_preview===undefined||this.state.image_preview===null?/*#__PURE__*/_jsx(TextField,{id:\"text_field\",required:true,className:\"form-control box_sm\",placeholder:\"Type Here\",multiline:true,rows:2,value:text,disabled:!channel,onChange:event=>this.setState({text:event.target.value})}):/*#__PURE__*/_jsx(\"img\",{src:this.state.image_preview,style:{'height':'45px'},id:\"preview_image\"}),/*#__PURE__*/_jsx(IconButton,{style:styles.sendButton,onClick:this.sendMessage// disabled={!channel || !text}\n,children:/*#__PURE__*/_jsx(Send,{style:styles.sendIcon})})]})}),/*#__PURE__*/_jsx(\"div\",{})]})]});}}const styles={container:{maxWidth:\"75%\",borderRadius:12,padding:16,color:\"black\",fontSize:12,backgroundColor:\"#fff\"},textField:{width:\"100%\",borderWidth:0,borderColor:\"transparent\"},textFieldContainer:{flex:1,marginRight:12},gridItem:{paddingTop:12,paddingBottom:12},gridItemChatList:{overflow:\"auto\",height:\"70vh\"},gridItemMessage:{marginTop:12,marginBottom:12},sendButton:{backgroundColor:\"#0de0fe\",width:\"7%\",height:\"50px\"},sendIcon:{color:\"white\"},mainGrid:{paddingTop:100,borderWidth:1},author:{fontSize:10,color:\"gray\"}};export default ChatScreen;","map":{"version":3,"names":["React","AppBar","Backdrop","CircularProgress","Container","CssBaseline","Grid","IconButton","List","TextField","Toolbar","Typography","Recorder","EmojiTransportationOutlined","Send","axios","moment","ChatItem","$","jsx","_jsx","jsxs","_jsxs","Chat","require","config","ChatScreen","Component","constructor","props","getToken","email","response","get","process","env","REACT_APP_BASE_URL","data","token","componentDidMount","document","ready","hide","click","show","setState","uname","name","uimage","path","sname","c_name","simage","c_path","localStorage","getItem","setItem","then","res","booking_chat_channel","chatmasterName","chatfunction","loading","booking_chat_channel2","joinChannel","channel","channelState","status","join","on","handleMessageAdded","room","id","nextID","string","string_first_concate","toString","split","string_last_concate","parseInt","ocname","oclastname","ocimage","queryBox","queryString","userQueryImage","queryTime","emailOwner","classAcitve","Error","client","Client","create","console","log","updateToken","messages","getMessages","items","scrollToBottom","getChannelByUniqueName","createChannel","uniqueName","friendlyName","error","code","message","state","author","triggerMessageSpecialist","triggerMessage","media","contentType","window","location","reload","getElementById","scrollHeight","height","clientHeight","maxScrollTop","scrollTop","sendMessage","recording_url","image_preview","text","image","String","trim","catch","formData","FormData","append","files","audioDetails","url","blob","chunks","duration","h","m","s","spec_image","searchvalue","refreshPage","defaultImage","specialist_login_time","scrollDiv","createRef","handleAudioStop","handleOnChange","value","audioname","handleAudioUpload","file","handleReset","reset","handleChange","event","target","handleChange1","src","URL","createObjectURL","getSpecialistStatus","specialistId","Date","now","componentWillUnmount","removeListener","render","Fragment","children","className","type","placeholder","onChange","bind","filter","undefined","first_name","toLowerCase","includes","last_name","map","href","onClick","setInterval","concat","alt","utc","tz","format","REACT_APP_URL","style","styles","container","index","record","title","audioURL","showUIAudio","customFunction","required","multiline","rows","disabled","sendButton","sendIcon","maxWidth","borderRadius","padding","color","fontSize","backgroundColor","textField","width","borderWidth","borderColor","textFieldContainer","flex","marginRight","gridItem","paddingTop","paddingBottom","gridItemChatList","overflow","gridItemMessage","marginTop","marginBottom","mainGrid"],"sources":["C:/xampp/htdocs/MedalohaLivePush/Medaloha_Dev_Local/src/pages/Components/ChatScreen.js"],"sourcesContent":["import React from \"react\";\r\nimport {\r\n  AppBar,\r\n  Backdrop,\r\n  CircularProgress,\r\n  Container,\r\n  CssBaseline,\r\n  Grid,\r\n  IconButton,\r\n  List,\r\n  TextField,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport {Recorder} from 'react-voice-recorder'\r\nimport 'react-voice-recorder/dist/index.css'\r\nimport { EmojiTransportationOutlined, Send } from \"@material-ui/icons\";\r\nimport axios from \"axios\";\r\nimport moment from 'moment';\r\nimport ChatItem from \"../Components/ChatItem\";\r\nimport $ from 'jquery';\r\nconst Chat = require(\"twilio-chat\");\r\n\r\nrequire('dotenv').config();\r\n\r\nclass ChatScreen extends React.Component {\r\n  constructor(props) {\r\n    super(props); \r\n    this.state = {\r\n      audioDetails : {\r\n        url: null,\r\n        blob: null,\r\n        chunks: null,\r\n        duration: {\r\n        h: null,\r\n        m: null,\r\n        s: null,\r\n        }\r\n        },\r\n      text: \"\",\r\n      messages: [],\r\n      loading: false,\r\n      channel: null,\r\n      booking_chat_channel:[],\r\n      triggerMessage : false ,\r\n      triggerMessageSpecialist:true,\r\n      emailOwner:'',\r\n      chatmasterName :\"\",\r\n      booking_chat_channel:[],\r\n      booking_chat_channel2:[], \r\n      classAcitve:'chat-scroll',\r\n      queryBox:false,\r\n      queryString:'',\r\n      queryTime:'',\r\n      spec_image:'',\r\n      ocname:'',\r\n      oclastname:'',\r\n      ocimage:'assets/img/doctors/doctor-thumb-02.jpg',\r\n      uname :'',\r\n      sname:'',\r\n      uimage:'',\r\n      simage:'',\r\n      image_preview:null,\r\n      searchvalue:'',\r\n      userQueryImage:'assets/img/doctors/doctor-thumb-02.jpg',\r\n      refreshPage:false,\r\n      defaultImage:'assets/img/doctors/doctor-thumb-02.jpg',\r\n      specialist_login_time:'avatar avatar-away'\r\n     \r\n    }; \r\n    this.scrollDiv = React.createRef();\r\n  }\r\n\r\n \r\n\r\n  getToken = async (email) => { \r\n   \r\n    const response = await axios.get(process.env.REACT_APP_BASE_URL+`/chatAPI/token/`+email);\r\n    const { data } = response;\r\n    return data.token;\r\n  };\r\n\r\n  handleAudioStop(data) {\r\n    console.log(data)\r\n    this.setState({ audioDetails: data });\r\n  }\r\n\r\n\r\n\r\n  handleOnChange(value, audioname ){\r\n    \r\n     console.log(\"ajaysoni\");\r\n  }\r\n\r\n async handleAudioUpload(file) {\r\n    console.log('uploaded file on twilio')\r\n    console.log(file);\r\n\r\n    this.state.channel.sendMessage({\r\n        contentType: 'audio/webm',\r\n          media:file,\r\n      }); \r\n\r\n   await this.joinChannel(this.state.channel); \r\n   \r\n    \r\n}\r\n\r\nhandleReset() {\r\n  const reset = {\r\n    url: null,\r\n    blob: null,\r\n    chunks: null,\r\n    duration: {\r\n      h: 0,\r\n      m: 0,\r\n      s: 0\r\n    }\r\n  };\r\n\r\nthis.setState({ audioDetails: reset });\r\n\r\n$(\".chat-cont-right .chat-footer .input-group .form-control\").show();\r\n$(\".MuiIconButton-root\").show();\r\n\r\n$(\"._1ceqH .1Yplu .1Pz2d\").hide();\r\n$(\"._1ceqH .1Yplu .2gd2_\").hide();\r\n$(\"._f2DT8\").hide();\r\n\r\n\r\n // const elementWithClass = document.querySelector('._1dpop'); // Replace 'your-class-name' with the actual class name you want to check\r\n //    if (elementWithClass) {\r\n //      $(\"._1Yplu\").hide(); // Hide the recorder if the class exists\r\n //    }\r\n //    else\r\n //    {\r\n //      $(\"._1Yplu\").show();\r\n //    }\r\n\r\n\r\n$(\"._1ceqH .3bC73 .1YOWG ._3bC73 ._1Yplu\").hide();\r\n //window.location.reload();\r\n\r\n}\r\n\r\n  handleChange(event) {\r\n    this.setState({searchvalue: event.target.value});\r\n  }\r\n\r\n\r\n\r\n  handleChange1(event) {   \r\n    const [file] = event.target.files\r\n    if (file) {\r\n      var  src = URL.createObjectURL(file) \r\n      this.setState({image_preview: src});\r\n    }\r\n }\r\n\r\n    getSpecialistStatus(specialistId)\r\n {\r\n  \r\n  axios.get(process.env.REACT_APP_BASE_URL+`/authenticationAPI/getspecialistStatus?specialistId=`+specialistId)\r\n    .then(res => {\r\n   \r\n\r\nif(parseInt(res.data)>parseInt(Date.now())){\r\n  \r\n      this.setState({specialist_login_time: 'avatar avatar-green'});\r\n      }\r\nelse\r\n{\r\n \r\n  this.setState({specialist_login_time: 'avatar avatar-away'});\r\n}\r\n\r\n     });  \r\n\r\n   }\r\n\r\n  componentDidMount = async () => {  \r\n\r\n  // const interval = setInterval(() => {\r\n  //        // var specialsitId =localStorage.getItem('specialsit_id');\r\n\r\n  //     this.getSpecialistStatus(69);  // Set isOnline to true\r\n  //   }, 10000);\r\n\r\n     \r\n    $( document ).ready(function() {\r\n\r\n\r\n      $(\"._1ceqH ._1Yplu ._1Pz2d\").hide();\r\n      $(\"._1ceqH ._1Yplu ._2gd2_\").hide();\r\n      $(\"._1ceqH ._f2DT8\").hide();\r\n      $(\"._1ceqH ._1Yplu ._1Pz2d\").hide();\r\n       $(\"._1ceqH ._1Yplu ._2gd2_\").hide();\r\n       $(\"._1ceqH ._f2DT8\").hide();\r\n      });\r\n      \r\n      $(\"._1dpop\").click(function(){\r\n       $(\".chat-cont-right .chat-footer .input-group .form-control\").hide();\r\n       $(\".MuiIconButton-root\").hide();\r\n       $(\"._1ceqH ._1Yplu ._1Pz2d\").show();\r\n       $(\"._1ceqH ._1Yplu ._2gd2_\").show();\r\n        $(\"._1ceqH ._f2DT8\").show();\r\n      })\r\n    \r\n\r\n    this.setState({uname:this.props.name});\r\n    this.setState({uimage:this.props.path}); \r\n    this.setState({sname:this.props.c_name});\r\n    this.setState({simage:this.props.c_path}); \r\n    \r\n   \r\n\r\n    if(localStorage.getItem('customer_id')!=null){\r\n      localStorage.setItem('globaluserid',localStorage.getItem('customer_id'));\r\n      axios.get(process.env.REACT_APP_BASE_URL+`/customerAPI/GetCustomerChatChannel?customer_id=`+localStorage.getItem('customer_id'))\r\n      .then(res => { \r\n           this.setState({booking_chat_channel : res.data});  \r\n           if(res.data){ \r\n            this.setState({chatmasterName:'Dr.' +res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n            this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id1'],\"spec_\"+res.data[0]['specialist_id'],res.data[0]['user_id']);\r\n            this.setState({ loading: true });  \r\n          }\r\n       });   \r\n    }\r\n\r\n\r\n    if(localStorage.getItem('specialist_id')!=null){\r\n      localStorage.setItem('globalspecialistid',localStorage.getItem('specialist_id'));\r\n      axios.get(process.env.REACT_APP_BASE_URL+`/specilistAPI/GetSpecialistChatChannel?specialist_id=`+localStorage.getItem('specialist_id'))\r\n      .then(res => { \r\n           this.setState({booking_chat_channel2 : res.data});  \r\n          \r\n           if(res.data){ \r\n            this.setState({chatmasterName:res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n            this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id2'],\"user_\"+res.data[0]['user_id'],res.data[0]['specialist_id']);\r\n            this.setState({ loading: true });  \r\n          }\r\n       });   \r\n    } \r\n  };\r\n\r\n\r\n  \r\n\r\n componentWillUnmount() {\r\n  if (this.state.channel) {\r\n    this.state.channel.removeListener(\"messageAdded\", this.handleMessageAdded);\r\n  }\r\n}\r\n\r\n  joinChannel = async (channel) => {\r\n      if (channel.channelState.status !== \"joined\") {\r\n        await channel.join();\r\n      }  \r\n    \r\n      channel.on(\"messageAdded\", this.handleMessageAdded);\r\n    \r\n  };\r\n\r\n\r\n  chatfunction = async(room,email,id,nextID) => {\r\n\r\n  \r\nvar string=id;\r\nlocalStorage.setItem(\"onChangeId\", id);\r\nvar string_first_concate=string.toString().split(\"_\")[0];\r\nvar string_last_concate=string.toString().split(\"_\")[1]; \r\nlocalStorage.getItem('globaluserid');\r\nlocalStorage.getItem('globalspecialistid');\r\n\r\n\r\n\r\nif(string_first_concate=='user')\r\n{\r\n\r\n    axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(string_last_concate))\r\n    .then(res => {\r\n         this.setState({ocname : res.data[0]['first_name']}); \r\n         this.setState({oclastname : res.data[0]['last_name']}); \r\n         if(res.data[0]['user_image']!=null)\r\n         this.setState({ocimage : process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});\r\n         this.setState({sname : res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n         if(res.data[0]['user_image']!=null)\r\n         this.setState({simage : process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});\r\n        });  \r\n }\r\n\r\n\r\n\r\nif(string_first_concate=='spec')\r\n{\r\n  axios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(string_last_concate))\r\n    .then(res => {\r\n          this.setState({ocname : res.data[0]['first_name']}); \r\n          this.setState({oclastname : res.data[0]['last_name']});\r\n          if(res.data[0]['profile_photo']!=null)\r\n          this.setState({ocimage : process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']}); \r\n\r\n          this.setState({sname : res.data[0]['first_name']+' '+res.data[0]['last_name']});  \r\n          if(res.data[0]['profile_photo']!=null)\r\n          this.setState({simage : process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']}); \r\n                  \r\n        }); \r\n\r\n}\r\n\r\n\r\n\r\n\r\nif(localStorage.getItem('globaluserid')!=null){ \r\n  axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(nextID))\r\n  .then(res => {\r\n       this.setState({uname : res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n       if(res.data[0]['user_image']!=null)\r\n       this.setState({uimage : process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']}); \r\n      });  \r\n}\r\n\r\nif(localStorage.getItem('globalspecialistid')!=null){\r\naxios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(localStorage.getItem('globalspecialistid')))\r\n.then(res => {\r\n    this.setState({uname : res.data[0]['first_name']+' '+res.data[0]['last_name']});  \r\n    this.setState({uimage : process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']}); \r\n  });  \r\n}\r\n   await axios.get(process.env.REACT_APP_BASE_URL+`/specilistAPI/GetUserQuery?payment_id=`+room)\r\n\t\t.then(res => {\r\n         if(res.data!=null){ \r\n           if(res.data[0]['specialist_query']!='null')\r\n            this.setState({queryBox : true});  \r\n\r\n            this.setState({queryString : res.data[0]['specialist_query']}); \r\n            if(res.data[0]['user_image']!=null)\r\n            this.setState({userQueryImage : res.data[0]['user_image']}); \r\n            this.setState({queryTime : true});  \r\n         }\r\n\t\t   \r\n\t\t}); \r\n \r\n\r\n //null 'null'\r\n \r\n    let token = \"\";\r\n    this.setState({emailOwner:email});\r\n    this.setState({ loading: true });  \r\n    this.setState({ classAcitve: 'chat-scroll-avtive' }); \r\n    try {\r\n      token = await this.getToken(email);\r\n   } catch {\r\n      throw new Error(\"unable to get token, please reload this page\");\r\n    } \r\n    const client = await Chat.Client.create(token);\r\nconsole.log(\"client created\");\r\n    console.log(client);\r\n    client.on(\"tokenAboutToExpire\", async () => {\r\n      const token = await this.getToken(email);\r\n      client.updateToken(token);\r\n    });\r\n\r\n    client.on(\"tokenExpired\", async () => {\r\n      const token = await this.getToken(email);\r\n      client.updateToken(token);\r\n    });\r\n\r\n    client.on(\"channelJoined\", async (channel) => { \r\n     \r\n       console.log(\"channel joined\");\r\n      // getting list of all messages since this is an existing channel\r\n      const messages = await channel.getMessages(); \r\n      console.log(messages);\r\n      this.setState({ messages: messages.items || [] });\r\n      this.scrollToBottom();\r\n    }); \r\n\r\n    try {  \r\n      const channel = await client.getChannelByUniqueName(room);\r\n      console.log(\"existing channel\");\r\n      console.log(room);\r\n      await this.joinChannel(channel);\r\n      this.setState({ channel, loading: false });\r\n      this.setState({ classAcitve: 'chat-scroll' }); \r\n    } catch {\r\n      try {\r\n    console.log(\"room ajay\");\r\n    console.log(room);\r\n   // if(channel!==null)\r\n\r\n\r\n     \r\n\r\nconsole.log(\"channel\");\r\n        const channel = await client.createChannel({\r\n          uniqueName: room,\r\n          friendlyName: room,\r\n        });\r\nconsole.log(channel);\r\n        await this.joinChannel(channel);\r\n        this.setState({ channel, loading: false });\r\n        this.setState({ classAcitve: 'chat-scroll' }); \r\n      } catch(error) {\r\n         console.error(\"Error creating channel:\", error);\r\n\r\n  // Log specific error properties for further investigation\r\n  if (error.code) {\r\n    console.error(\"Error Code:\", error.code);\r\n  }\r\n  if (error.message) {\r\n    console.error(\"Error Message:\", error.message);\r\n  }\r\n        console.log(\"unable to create channel, please reload this page\"+error);\r\n      }\r\n    }\r\n  }\r\n  \r\n\r\n  handleMessageAdded = (message) => { \r\n    const { messages } = this.state;\r\n     \r\n     if(message.author!==this.state.emailOwner) \r\n       if(this.state.triggerMessageSpecialist) {   \r\n        this.setState(\r\n          {\r\n            messages: !!messages ? [...messages, message] : [message],\r\n          },\r\n          this.scrollToBottom\r\n         );  \r\n         this.setState({triggerMessageSpecialist:false}); \r\n     }\r\n\r\n\r\n     if(this.state.triggerMessage) {   \r\n      this.setState(\r\n        {\r\n          messages: !!messages ? [...messages, message] : [message],\r\n        },\r\n        this.scrollToBottom\r\n       );  \r\n      // message.body = ''; \r\n       this.setState({triggerMessage:false}); \r\n       this.setState({triggerMessageSpecialist:true});  \r\n   }\r\n    \r\n\r\n   if(message.media!=null && message.media.state.contentType=='audio/webm'){\r\n      window.location.reload();\r\n   }\r\n   \r\n  };\r\n\r\n  scrollToBottom = () => {\r\n     const messages = document.getElementById('asc');\r\n     let scrollHeight = messages.scrollHeight;\r\n     let height = messages.clientHeight;\r\n     let maxScrollTop = scrollHeight - height;\r\n     messages.scrollTop = maxScrollTop > 0 ? maxScrollTop : 0;\r\n  };\r\n\r\n \r\n\r\n  sendMessage = () => {\r\n    this.setState({recording_url:null});    \r\n    this.setState({image_preview:null});\r\n        const { text, channel,image } = this.state;  \r\n\r\n  if (text && String(text).trim()) {\r\n     console.log(\"Sending message\");\r\n    this.setState({ loading: true }, () => {\r\n         console.log(\"Loading state set to true\");\r\n    });\r\n    channel && channel.sendMessage(text).then(() => {\r\n      \r\n        this.setState({ text: \"\", loading: false }, () => {\r\n             console.log(\"Text reset and loading state set to false\");\r\n        });\r\n        this.setState({ triggerMessage: true }, () => {\r\n            console.log(\"Trigger message set to true\");\r\n        });\r\n    }).catch(error => {\r\n        console.error(\"Error sending message:\", error);\r\n    });\r\n}\r\n\r\n\r\n          else  {\r\n \r\n\r\n      const formData = new FormData();\r\n      formData.append('file', document.getElementById('formInputFile')[0].files[0]);\r\n      channel.sendMessage(formData);\r\n\r\n    }\r\n }\r\n\r\n\r\n  render() {\r\n    const { loading, text, messages, channel } = this.state;\r\n   // const { id,name,path,c_name,c_path} = this.props;\r\n    const { location } = this.props;\r\n    const { state } = location || {};  \r\n    const id= this.props.id;\r\n\r\n  \r\n\r\n    //  name=this.props.name; \r\n   // const path= this.props.path;\r\n   // const c_name=this.props.c_name;\r\n   // const c_path=this.props.c_path;\r\n \r\n\r\n    // console.log('loading'); \r\n    // console.log(loading);\r\n\r\n    return (\r\n      <React.Fragment>\r\n      <div className=\"chat-cont-left\">\r\n      <div className=\"chat-header\">\r\n        <span>Chats</span>\r\n       \r\n      </div>\r\n      <form className=\"chat-search\">\r\n        <div className=\"input-group\">\r\n          <div className=\"input-group-prepend\">\r\n            <i className=\"fas fa-search\"></i>\r\n          </div>\r\n          <input type=\"text\" className=\"form-control\" placeholder=\"Search\"  onChange={this.handleChange.bind(this)} />\r\n        </div>\r\n      </form>\r\n      <div className=\"chat-users-list\">\r\n      <div className=\"chat-scroll\" >  \r\n\r\n {this.state.booking_chat_channel.filter( (channel)=> {  \r\n    \t\r\n //return (this.state.searchvalue===null||this.state.searchvalue===undefined ||this.state.searchvalue==='')?channel:channel.first_name.toLowerCase()===this.state.searchvalue.toLowerCase();\r\n return (this.state.searchvalue===null || this.state.searchvalue===undefined  ||this.state.searchvalue==='')?channel: (channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) || channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) ||  (channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase()));\r\n   }).map( (channel)=> ( \r\n      \r\n<a href=\"javascript:void(0);\" className=\"media\"  onClick={()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id1'],'spec_'+channel['specialist_id'],channel['user_id'])}>\r\n         <div className=\"media-img-wrap specilaist\">\r\n             \r\n            <p className=\"demopart\">{ setInterval(() => {this.getSpecialistStatus(channel['specialist_id'])}, 60000*1.2)}</p>\r\n              \r\n           <div className={this.state.specialist_login_time} id=\"user_part\">\r\n           \r\n\r\n             <img src={channel['profile_photo']!=null?`${process.env.REACT_APP_BASE_URL}/public/uploads/docs/profileresize/${channel['profile_photo']}` : this.state.defaultImage} alt={channel['first_name'] +' '+channel['last_name']} className=\"avatar-img rounded-circle\" />\r\n           </div>\r\n         </div>\r\n         <div className=\"media-body\">\r\n           <div>\r\n             <div className=\"user-name\">{channel['first_name']} {channel['last_name']}</div> \r\n             <div className=\"user-name\">\r\n { localStorage.getItem('UserTimezone')!=null ? moment.utc(channel['session_date']).tz(localStorage.getItem('UserTimezone')).format('D MMM YYYY h:mm A') : moment(channel['session_date']).format('D MMM YYYY h:mm A') }\r\n             </div> \r\n             <div className=\"user-last-chat\">\r\n                  {channel['last_message']} \r\n              </div>\r\n           </div>\r\n           <div>\r\n             <div className=\"last-chat-time block\"></div>\r\n             <div className=\"badge badge-success badge-pill\"></div>\r\n           </div>\r\n         </div>\r\n </a>\r\n\r\n\r\n))}\r\n\r\n\r\n{this.state.booking_chat_channel2.filter( (channel)=> {  \r\n return (this.state.searchvalue===null || this.state.searchvalue===undefined  ||this.state.searchvalue==='')?channel: (channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) || channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) ||  (channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase()));\r\n   }).map( (channel)=> (\t  \r\n             <a href=\"javascript:void(0);\" className=\"media\"  onClick={()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id2'],'user_'+channel['user_id'],channel['specialist_id'])}>\r\n                      <div className=\"media-img-wrap\">\r\n                         <div className=\"avatar avatar-away\" id=\"specialist_part\">\r\n                           {channel['user_image'] && channel['user_image']!=null ?\r\n                           <img src={`${process.env.REACT_APP_BASE_URL}/public/uploads/profile/${channel['user_image']}`} alt={channel['first_name'] +' '+channel['last_name']} className=\"avatar-img rounded-circle\" />:\r\n                           <img src={`${process.env.REACT_APP_URL}/assets/img/doctors/doctor-thumb-02.jpg`} alt=\"User Image\" className=\"avatar-img rounded-circle\" />\r\n                          }\r\n                         </div>\r\n                      </div>\r\n                      <div className=\"media-body\">\r\n                        <div>\r\n                          <div className=\"user-name\">{channel['first_name'] +' '+channel['last_name']}\r\n                          </div>\r\n                                <div className=\"user-name\">\r\n { localStorage.getItem('UserTimezone')!=null ? moment.utc(channel['session_date']).tz(localStorage.getItem('UserTimezone')).format('D MMM YYYY h:mm A') : moment(channel['session_date']).format('D MMM YYYY h:mm A') }\r\n             </div>\r\n                        </div>\r\n                   \r\n                        <div>\r\n                          <div className=\"last-chat-time block\"></div>\r\n                          <div className=\"badge badge-success badge-pill\"></div>\r\n                        </div>\r\n                      </div>\r\n              </a>\r\n\r\n      ))}\r\n\r\n              \r\n\r\n\r\n              \r\n        </div>\r\n       </div>\r\n    </div>\r\n    <div className=\"chat-cont-right\">\r\n   \r\n       \r\n    <div className=\"chat-header\">\r\n                  <a id=\"back_user_list\" href=\"javascript:void(0)\" className=\"back-user-list\">\r\n                    <i className=\"material-icons\">chevron_left</i>\r\n                  </a>\r\n                  <div className=\"media\">\r\n                    <div className=\"media-img-wrap\">\r\n                      <div className={this.state.specialist_login_time}>\r\n                         <img src={`${this.state.ocimage}`} alt=\"User Image22\" className=\"avatar-img rounded-circle\" />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"media-body\">\r\n                      <div className=\"user-name\">  \r\n                       <div className=\"user-name\"\r\n                       > {this.state.ocname+' '+this.state.oclastname}\r\n                      \r\n                      \r\n                      <div className=\"input-group-prepend\">\r\n                        <div className=\"btn-file btn\">\r\n                          <i className=\"fa fa-paperclip\"></i>\r\n                          <form id=\"formInputFile\">\r\n                             <input type=\"file\" id=\"rimage\" onChange={this.handleChange1.bind(this)}/>  \r\n                          </form>\r\n                        </div>\r\n\r\n                         </div>\r\n                         \r\n                          </div>\r\n                       </div>\r\n                   \r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"input-group-prepend\"> \r\n                    </div>\r\n\r\n                 \r\n                </div>\r\n   \r\n  <div className=\"chat-body\">  \r\n    <div className={this.state.classAcitve}  id=\"asc\"> \r\n    {this.state.queryBox && this.state.queryBox!='null' ?\r\n    <li className=\"MuiListItem-root tets MuiListItem-gutters\"><div>\r\n        <div style={styles.author}>\r\n            <div className=\"avatar\">\r\n              <img src={this.state.userQueryImage} alt=\"User Image22\" className=\"avatar-img rounded-circle\" />\r\n            </div> \r\n            {this.state.ocname+' '+this.state.oclastname}\r\n         </div>\r\n         {(this.state.queryString && this.state.queryString!=null)  ?\r\n          <div style={styles.container}>\r\n              {(this.state.queryString && this.state.queryString!=null && this.state.queryString!=null)  ? this.state.queryString  : '' } \r\n              <div className=\"chat-time\"> \r\n              {(this.state.queryString!=null)  ? this.state.queryTime  : '' }\r\n              </div>\r\n           </div>\r\n           : ''}\r\n     \r\n         </div>\r\n\r\n         <div>\r\n       \r\n      </div></li>:''\r\n      } \r\n\r\n\r\n\r\n   {messages &&  messages.map((message) => ( \r\n              \r\n\r\n\r\n                  <ChatItem\r\n                      key={message.index}\r\n                      message={message}\r\n                      email={this.state.emailOwner}\r\n                      id={id}\r\n                      name={this.state.emailOwner==message.author?this.state.uname:'goud deepak'}\r\n                      path={this.state.emailOwner==message.author?this.state.uimage:'deepak goud'}\r\n                      c_name={this.state.sname}\r\n                      c_path={this.state.simage} \r\n                  />\r\n              ))}  \r\n              </div>\r\n           </div> \r\n           <div className=\"chat-footer\">\r\n           <div className=\"input-group d-flex \"> \r\n           <Recorder\r\n            record={true}\r\n            title={\"New recording\"}\r\n            audioURL={this.state.audioDetails.url}\r\n            showUIAudio={true}\r\n            handleAudioStop={data => this.handleAudioStop(data)}\r\n            handleOnChange={(value) => this.customFunction()}\r\n            handleAudioUpload={data => this.handleAudioUpload(data)}\r\n            handleReset={() => this.handleReset()}\r\n            /> \r\n\r\n             {(this.state.image_preview===undefined || this.state.image_preview===null)  ? <TextField id=\"text_field\" required className=\"form-control box_sm\" placeholder=\"Type Here\" multiline rows={2} value={text} disabled={!channel} onChange={(event) =>this.setState({ text: event.target.value })}/>:<img src={this.state.image_preview} style={{'height':'45px'}}   id=\"preview_image\" /> }\r\n\r\n              <IconButton\r\n                style={styles.sendButton}\r\n                onClick={this.sendMessage}\r\n                // disabled={!channel || !text}\r\n              >\r\n               <Send style={styles.sendIcon} />\r\n              </IconButton> \r\n              </div>\r\n              </div>\r\n    <div>\r\n\r\n  \r\n    </div>\r\n   </div>\r\n   \r\n    </React.Fragment>\r\n     \r\n    );\r\n  }\r\n}\r\n\r\nconst styles = {\r\n  container :{\r\n    maxWidth: \"75%\",\r\n    borderRadius: 12,\r\n    padding: 16,\r\n    color: \"black\",\r\n    fontSize: 12,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  textField: { width: \"100%\", borderWidth: 0, borderColor: \"transparent\" },\r\n  textFieldContainer: { flex: 1, marginRight: 12 },\r\n  gridItem: { paddingTop: 12, paddingBottom: 12 },\r\n  gridItemChatList: { overflow: \"auto\", height: \"70vh\" },\r\n  gridItemMessage: { marginTop: 12, marginBottom: 12 },\r\n  sendButton: { backgroundColor: \"#0de0fe\",width:\"7%\",height:\"50px\"},\r\n  sendIcon: { color: \"white\" },\r\n  mainGrid: { paddingTop: 100, borderWidth: 1 }, \r\n  author: { fontSize: 10, color: \"gray\" },\r\n};\r\n\r\n\r\n\r\nexport default ChatScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}