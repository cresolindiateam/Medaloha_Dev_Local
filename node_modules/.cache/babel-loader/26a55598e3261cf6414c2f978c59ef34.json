{"ast":null,"code":"import React from\"react\";import{AppBar,Backdrop,CircularProgress,Container,CssBaseline,Grid,IconButton,List,TextField,Toolbar,Typography}from\"@material-ui/core\";import{Recorder}from'react-voice-recorder';import'react-voice-recorder/dist/index.css';import{EmojiTransportationOutlined,Send}from\"@material-ui/icons\";import axios from\"axios\";import moment from'moment';import ChatItem from\"../Components/ChatItem\";import $ from'jquery';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=require(\"twilio-chat\");require('dotenv').config();class ChatScreen extends React.Component{constructor(props){super(props);this.getToken=async email=>{const response=await axios.get(process.env.REACT_APP_BASE_URL+\"/chatAPI/token/\"+email);const{data}=response;return data.token;};this.componentDidMount=async()=>{this.setState({uname:this.props.name});this.setState({uimage:this.props.path});this.setState({sname:this.props.c_name});this.setState({simage:this.props.c_path});if(localStorage.getItem('customer_id')!=null){localStorage.setItem('globaluserid',localStorage.getItem('customer_id'));axios.get(process.env.REACT_APP_BASE_URL+\"/customerAPI/GetCustomerChatChannel?customer_id=\"+localStorage.getItem('customer_id')).then(res=>{this.setState({booking_chat_channel:res.data});if(res.data){this.setState({chatmasterName:'Dr.'+res.data[0]['first_name']+' '+res.data[0]['last_name']});this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id1'],\"spec_\"+res.data[0]['specialist_id'],res.data[0]['user_id']);this.setState({loading:true});}});}if(localStorage.getItem('specialist_id')!=null){localStorage.setItem('globalspecialistid',localStorage.getItem('specialist_id'));axios.get(process.env.REACT_APP_BASE_URL+\"/specilistAPI/GetSpecialistChatChannel?specialist_id=\"+localStorage.getItem('specialist_id')).then(res=>{this.setState({booking_chat_channel2:res.data});if(res.data){this.setState({chatmasterName:res.data[0]['first_name']+' '+res.data[0]['last_name']});this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id2'],\"user_\"+res.data[0]['user_id'],res.data[0]['specialist_id']);this.setState({loading:true});}});}$(document).ready(function(){document.querySelector('._1Pz2d').style.display='none';document.querySelector('._1ceqH ._1Yplu ._2gd2_').style.display='none';document.querySelector('._1YOWG').style.display='none';document.querySelector('._1ceqH ._f2DT8').style.display='none';alert(\"hellow\");$(document).on('click','._1dpop',function(){alert(\"hello\");document.querySelector('.MuiFormControl-root').style.display='none';document.querySelector('.MuiIconButton-root').style.display='none';document.querySelector('._1Pz2d').style.display='block';document.querySelector('._1ceqH ._1Yplu ._2gd2_').style.display='block';document.querySelector('._1YOWG').style.display='block';document.querySelector('._1ceqH ._f2DT8').style.display='block';});});};this.joinChannel=async channel=>{if(channel.channelState.status!==\"joined\"){await channel.join();}channel.on(\"messageAdded\",this.handleMessageAdded);};this.chatfunction=async(room,email,id,nextID)=>{this.selectchatmember(room);var string=id;localStorage.setItem(\"onChangeId\",id);var string_first_concate=string.toString().split(\"_\")[0];var string_last_concate=string.toString().split(\"_\")[1];localStorage.getItem('globaluserid');localStorage.getItem('globalspecialistid');if(string_first_concate=='user'){axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(string_last_concate)).then(res=>{this.setState({ocname:res.data[0]['first_name']});this.setState({oclastname:res.data[0]['last_name']});if(res.data[0]['user_image']!=null)this.setState({ocimage:process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});this.setState({sname:res.data[0]['first_name']+' '+res.data[0]['last_name']});if(res.data[0]['user_image']!=null)this.setState({simage:process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});});}if(string_first_concate=='spec'){axios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(string_last_concate)).then(res=>{this.setState({ocname:res.data[0]['first_name']});this.setState({oclastname:res.data[0]['last_name']});if(res.data[0]['profile_photo']!=null)this.setState({ocimage:process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']});this.setState({sname:res.data[0]['first_name']+' '+res.data[0]['last_name']});if(res.data[0]['profile_photo']!=null)this.setState({simage:process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']});});}if(localStorage.getItem('globaluserid')!=null){axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(nextID)).then(res=>{this.setState({uname:res.data[0]['first_name']+' '+res.data[0]['last_name']});if(res.data[0]['user_image']!=null)this.setState({uimage:process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});});}if(localStorage.getItem('globalspecialistid')!=null){axios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(localStorage.getItem('globalspecialistid'))).then(res=>{this.setState({uname:res.data[0]['first_name']+' '+res.data[0]['last_name']});this.setState({uimage:process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']});});}await axios.get(process.env.REACT_APP_BASE_URL+\"/specilistAPI/GetUserQuery?payment_id=\"+room).then(res=>{if(res.data!=null){if(res.data[0]['specialist_query']!='null')this.setState({queryBox:true});this.setState({queryString:res.data[0]['specialist_query']});if(res.data[0]['user_image']!=null)this.setState({userQueryImage:res.data[0]['user_image']});this.setState({queryTime:true});}});//null 'null'\nlet token=\"\";this.setState({emailOwner:email});this.setState({loading:true});this.setState({classAcitve:'chat-scroll-avtive'});try{token=await this.getToken(email);}catch{throw new Error(\"unable to get token, please reload this page\");}const client=await Chat.Client.create(token);client.on(\"tokenAboutToExpire\",async()=>{const token=await this.getToken(email);client.updateToken(token);});client.on(\"tokenExpired\",async()=>{const token=await this.getToken(email);client.updateToken(token);});client.on(\"channelJoined\",async channel=>{const messages=await channel.getMessages();this.setState({messages:messages.items||[]});this.scrollToBottom();});try{const channel=await client.getChannelByUniqueName(room);await this.joinChannel(channel);this.setState({channel,loading:false});this.setState({classAcitve:'chat-scroll'});}catch{try{const channel=await client.createChannel({uniqueName:room,friendlyName:room});await this.joinChannel(channel);this.setState({channel,loading:false});this.setState({classAcitve:'chat-scroll'});}catch(error){if(error.code){console.error(\"Error Code:\",error.code);}if(error.message){console.error(\"Error Message:\",error.message);}console.log(\"unable to create channel, please reload this page\"+error);}}};this.handleMessageAdded=message=>{const{messages}=this.state;if(message.author!==this.state.emailOwner)if(message.media!=null&&message.media.state.contentType=='audio/webm'){}if(this.state.triggerMessageSpecialist){this.setState({messages:!!messages?[...messages,message]:[message]},this.scrollToBottom);this.setState({triggerMessageSpecialist:false});this.setState({triggerMessage:true});}if(this.state.triggerMessage){this.setState({messages:!!messages?[...messages,message]:[message]},this.scrollToBottom);// message.body = ''; \nthis.setState({triggerMessage:true});this.setState({triggerMessageSpecialist:true});}};this.scrollToBottom=()=>{const messages=document.getElementById('asc');let scrollHeight=messages.scrollHeight;let height=messages.clientHeight;let maxScrollTop=scrollHeight-height;messages.scrollTop=maxScrollTop>0?maxScrollTop:0;};this.allErase=()=>{window.location.reload();};this.sendMessage=()=>{this.setState({recording_url:null});this.setState({image_preview:null});const{text,channel,image}=this.state;if(text&&String(text).trim()){this.setState({loading:true},()=>{console.log(\"Loading state set to true\");});channel&&channel.sendMessage(text).then(()=>{this.setState({text:\"\",loading:false},()=>{console.log(\"Text reset and loading state set to false\");});this.setState({triggerMessage:true},()=>{console.log(\"Trigger message set to true\");});}).catch(error=>{console.error(\"Error sending message:\",error);});}else{const formData=new FormData();formData.append('file',document.getElementById('formInputFile')[0].files[0]);channel.sendMessage(formData);}};this.state={audioDetails:{url:null,blob:null,chunks:null,duration:{h:null,m:null,s:null}},text:\"\",messages:[],loading:false,channel:null,booking_chat_channel:[],triggerMessage:false,triggerMessageSpecialist:true,emailOwner:'',chatmasterName:\"\",booking_chat_channel:[],booking_chat_channel2:[],classAcitve:'chat-scroll',queryBox:false,queryString:'',queryTime:'',spec_image:'',ocname:'',oclastname:'',ocimage:'assets/img/doctors/doctor-thumb-02.jpg',uname:'',sname:'',uimage:'',simage:'',image_preview:null,searchvalue:'',userQueryImage:'assets/img/doctors/doctor-thumb-02.jpg',refreshPage:false,defaultImage:'assets/img/doctors/doctor-thumb-02.jpg',specialist_login_time:'avatar avatar-away',selectchatmemberid:'',setIsUploading:false};this.scrollDiv=/*#__PURE__*/React.createRef();}handleAudioStop(data){this.setState({audioDetails:data});}handleOnChange(value,audioname){console.log(\"ajaysoni\");}customFunction(){}async handleAudioUpload(file){//alert(\"hello2\");\nthis.state.channel.sendMessage({contentType:'audio/webm',media:file});this.setState({setIsUploading:true});// Simulate audio upload process with setTimeout (replace with your actual upload mechanism)\nsetTimeout(()=>{this.setState({setIsUploading:false});// Set uploading state to false after some time (simulating upload completion)\n},3000);if(!this.state.setIsUploading){document.querySelector('.MuiFormControl-root').style.display='block';document.querySelector('.MuiIconButton-root').style.display='block';document.querySelector('._1Pz2d').style.display='none';document.querySelector('._1ceqH ._1Yplu ._2gd2_').style.display='none';document.querySelector('._1YOWG').style.display='none';const elementsToRemove=document.querySelectorAll('._qxztz');elementsToRemove.forEach(element=>{element.remove();});}// if (this.state.audioDetails.url.current) {\n//      // Access the recorder component using the ref and reset or reinitialize it as needed\n//      // For example, reset the recorder component state, stop any ongoing recordings, etc.\n//      this.state.audioDetails.url.current.reset(); // Assuming the recorder component has a reset method\n//    }\nreturn false;//await this.joinChannel(this.state.channel); \n}handleReset(){const reset={url:null,blob:null,chunks:null,duration:{h:0,m:0,s:0}};this.setState({audioDetails:reset});window.location.reload();}handleChange(event){this.setState({searchvalue:event.target.value});}handleChange1(event){const[file]=event.target.files;if(file){var src=URL.createObjectURL(file);this.setState({image_preview:src});}}getSpecialistStatus(specialistId){axios.get(process.env.REACT_APP_BASE_URL+\"/authenticationAPI/getspecialistStatus?specialistId=\"+specialistId).then(res=>{if(parseInt(res.data)>parseInt(Date.now())){this.setState({specialist_login_time:'avatar avatar-green'});}else{this.setState({specialist_login_time:'avatar avatar-away'});}});}selectchatmember(room){this.setState({selectchatmemberid:room});}render(){const{loading,text,messages,channel}=this.state;// const { id,name,path,c_name,c_path} = this.props;\nconst{location}=this.props;const{state}=location||{};const id=this.props.id;//  name=this.props.name; \n// const path= this.props.path;\n// const c_name=this.props.c_name;\n// const c_path=this.props.c_path;\n// console.log('loading'); \n// console.log(loading);\nreturn/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-cont-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Chats\"})}),/*#__PURE__*/_jsx(\"form\",{className:\"chat-search\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Search\",onChange:this.handleChange.bind(this)})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-users-list\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat-scroll\",children:[this.state.booking_chat_channel.filter(channel=>{//return (this.state.searchvalue===null||this.state.searchvalue===undefined ||this.state.searchvalue==='')?channel:channel.first_name.toLowerCase()===this.state.searchvalue.toLowerCase();\nreturn this.state.searchvalue===null||this.state.searchvalue===undefined||this.state.searchvalue===''?channel:channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||(channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase());}).map(channel=>/*#__PURE__*/_jsxs(\"a\",{href:\"javascript:void(0);\",className:channel['twilio_chat_id1'].includes(this.state.selectchatmemberid)?'media  selectedchatmember':'media  ',onClick:()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id1'],'spec_'+channel['specialist_id'],channel['user_id']),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"media-img-wrap specilaist\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"demopart\",children:setInterval(()=>{this.getSpecialistStatus(channel['specialist_id']);},60000*1.2)}),/*#__PURE__*/_jsx(\"div\",{className:this.state.specialist_login_time,id:\"user_part\",children:/*#__PURE__*/_jsx(\"img\",{src:channel['profile_photo']!=null?\"\".concat(process.env.REACT_APP_BASE_URL,\"/public/uploads/docs/profileresize/\").concat(channel['profile_photo']):this.state.defaultImage,alt:channel['first_name']+' '+channel['last_name'],className:\"avatar-img rounded-circle\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-body\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-name\",children:[channel['first_name'],\" \",channel['last_name']]}),/*#__PURE__*/_jsx(\"div\",{className:\"user-name\",children:localStorage.getItem('UserTimezone')!=null?channel['session_date']!=''?moment.utc(channel['session_date']).tz(localStorage.getItem('UserTimezone')).format('D MMM YYYY h:mm A'):'-':moment(channel['session_date']).format('D MMM YYYY h:mm A')}),/*#__PURE__*/_jsx(\"div\",{className:\"user-last-chat\",children:channel['last_message']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"last-chat-time block\"}),/*#__PURE__*/_jsx(\"div\",{className:\"badge badge-success badge-pill\"})]})]})]})),this.state.booking_chat_channel2.filter(channel=>{return this.state.searchvalue===null||this.state.searchvalue===undefined||this.state.searchvalue===''?channel:channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase())||(channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase());}).map(channel=>/*#__PURE__*/_jsxs(\"a\",{href:\"javascript:void(0);\",className:channel['twilio_chat_id2'].includes(this.state.selectchatmemberid)?'media  selectedchatmember':'media  ',onClick:()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id2'],'user_'+channel['user_id'],channel['specialist_id']),children:[/*#__PURE__*/_jsx(\"div\",{className:\"media-img-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"avatar avatar-away\",id:\"specialist_part\",children:channel['user_image']&&channel['user_image']!=null?/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_BASE_URL,\"/public/uploads/profile/\").concat(channel['user_image']),alt:channel['first_name']+' '+channel['last_name'],className:\"avatar-img rounded-circle\"}):/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_URL,\"/assets/img/doctors/doctor-thumb-02.jpg\"),alt:\"User Image\",className:\"avatar-img rounded-circle\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-body\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-name\",children:channel['first_name']+' '+channel['last_name']}),/*#__PURE__*/_jsx(\"div\",{className:\"user-name\",children:localStorage.getItem('SpecialistTimezone')!=null?channel['session_date']!=''?moment.utc(channel['session_date']).tz(localStorage.getItem('SpecialistTimezone')).format('D MMM YYYY h:mm A'):'-':moment(channel['session_date']).format('D MMM YYYY h:mm A')})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"last-chat-time block\"}),/*#__PURE__*/_jsx(\"div\",{className:\"badge badge-success badge-pill\"})]})]})]}))]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-cont-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-header\",children:[/*#__PURE__*/_jsx(\"a\",{id:\"back_user_list\",href:\"javascript:void(0)\",className:\"back-user-list\",children:/*#__PURE__*/_jsx(\"i\",{className:\"material-icons\",children:\"chevron_left\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"media\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"media-img-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:this.state.specialist_login_time,children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(this.state.ocimage),alt:\"User Image22\",className:\"avatar-img rounded-circle\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"media-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"user-name\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-name\",children:[\" \",this.state.ocname+' '+this.state.oclastname,/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-file btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-paperclip\"}),/*#__PURE__*/_jsx(\"form\",{id:\"formInputFile\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"rimage\",onChange:this.handleChange1.bind(this)})})]})})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:this.state.classAcitve,id:\"asc\",children:[this.state.queryBox&&this.state.queryBox!='null'?/*#__PURE__*/_jsxs(\"li\",{className:\"MuiListItem-root tets MuiListItem-gutters\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.author,children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar\",children:/*#__PURE__*/_jsx(\"img\",{src:this.state.userQueryImage,alt:\"User Image22\",className:\"avatar-img rounded-circle\"})}),this.state.ocname+' '+this.state.oclastname]}),this.state.queryString&&this.state.queryString!=null?/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[this.state.queryString&&this.state.queryString!=null&&this.state.queryString!=null?this.state.queryString:'',/*#__PURE__*/_jsx(\"div\",{className:\"chat-time\",children:this.state.queryString!=null?this.state.queryTime:''})]}):'']}),/*#__PURE__*/_jsx(\"div\",{})]}):'',messages&&messages.map(message=>/*#__PURE__*/_jsx(ChatItem,{message:message,email:this.state.emailOwner,id:id,name:this.state.emailOwner==message.author?this.state.uname:'goud deepak',path:this.state.emailOwner==message.author?this.state.uimage:'deepak goud',c_name:this.state.sname,c_path:this.state.simage},message.index))]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-footer\",children:[this.state.setIsUploading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading Audio...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group d-flex \",children:[/*#__PURE__*/_jsx(Recorder,{record:true,title:\"New recording\",audioURL:this.state.audioDetails.url,showUIAudio:true,handleAudioStop:data=>this.handleAudioStop(data),handleOnChange:value=>this.customFunction(),handleAudioUpload:data=>this.handleAudioUpload(data),handleReset:()=>this.handleReset()}),this.state.image_preview===undefined||this.state.image_preview===null?/*#__PURE__*/_jsx(TextField,{id:\"text_field\",required:true,className:\"form-control box_sm\",placeholder:\"Type Here\",multiline:true,rows:2,value:text,disabled:!channel,onChange:event=>this.setState({text:event.target.value})}):/*#__PURE__*/_jsx(\"img\",{src:this.state.image_preview,style:{'height':'45px'},id:\"preview_image\"}),/*#__PURE__*/_jsx(IconButton,{style:styles.sendButton,onClick:this.sendMessage// disabled={!channel || !text}\n,children:/*#__PURE__*/_jsx(Send,{style:styles.sendIcon})})]})]}),/*#__PURE__*/_jsx(\"div\",{})]})]});}}const styles={container:{maxWidth:\"75%\",borderRadius:12,padding:16,color:\"black\",fontSize:12,backgroundColor:\"#fff\"},textField:{width:\"100%\",borderWidth:0,borderColor:\"transparent\"},textFieldContainer:{flex:1,marginRight:12},gridItem:{paddingTop:12,paddingBottom:12},gridItemChatList:{overflow:\"auto\",height:\"70vh\"},gridItemMessage:{marginTop:12,marginBottom:12},sendButton:{backgroundColor:\"#0de0fe\",width:\"7%\",height:\"50px\"},sendIcon:{color:\"white\"},mainGrid:{paddingTop:100,borderWidth:1},author:{fontSize:10,color:\"gray\"}};export default ChatScreen;","map":{"version":3,"names":["React","AppBar","Backdrop","CircularProgress","Container","CssBaseline","Grid","IconButton","List","TextField","Toolbar","Typography","Recorder","EmojiTransportationOutlined","Send","axios","moment","ChatItem","$","jsx","_jsx","jsxs","_jsxs","Chat","require","config","ChatScreen","Component","constructor","props","getToken","email","response","get","process","env","REACT_APP_BASE_URL","data","token","componentDidMount","setState","uname","name","uimage","path","sname","c_name","simage","c_path","localStorage","getItem","setItem","then","res","booking_chat_channel","chatmasterName","chatfunction","loading","booking_chat_channel2","document","ready","querySelector","style","display","alert","on","joinChannel","channel","channelState","status","join","handleMessageAdded","room","id","nextID","selectchatmember","string","string_first_concate","toString","split","string_last_concate","parseInt","ocname","oclastname","ocimage","queryBox","queryString","userQueryImage","queryTime","emailOwner","classAcitve","Error","client","Client","create","updateToken","messages","getMessages","items","scrollToBottom","getChannelByUniqueName","createChannel","uniqueName","friendlyName","error","code","console","message","log","state","author","media","contentType","triggerMessageSpecialist","triggerMessage","getElementById","scrollHeight","height","clientHeight","maxScrollTop","scrollTop","allErase","window","location","reload","sendMessage","recording_url","image_preview","text","image","String","trim","catch","formData","FormData","append","files","audioDetails","url","blob","chunks","duration","h","m","s","spec_image","searchvalue","refreshPage","defaultImage","specialist_login_time","selectchatmemberid","setIsUploading","scrollDiv","createRef","handleAudioStop","handleOnChange","value","audioname","customFunction","handleAudioUpload","file","setTimeout","elementsToRemove","querySelectorAll","forEach","element","remove","handleReset","reset","handleChange","event","target","handleChange1","src","URL","createObjectURL","getSpecialistStatus","specialistId","Date","now","render","Fragment","children","className","type","placeholder","onChange","bind","filter","undefined","first_name","toLowerCase","includes","last_name","map","href","onClick","setInterval","concat","alt","utc","tz","format","REACT_APP_URL","styles","container","index","record","title","audioURL","showUIAudio","required","multiline","rows","disabled","sendButton","sendIcon","maxWidth","borderRadius","padding","color","fontSize","backgroundColor","textField","width","borderWidth","borderColor","textFieldContainer","flex","marginRight","gridItem","paddingTop","paddingBottom","gridItemChatList","overflow","gridItemMessage","marginTop","marginBottom","mainGrid"],"sources":["C:/xampp/htdocs/MedalohaLivePush/Medaloha_Dev_Local/src/pages/Components/ChatScreen.js"],"sourcesContent":["import React from \"react\";\r\nimport {\r\n  AppBar,\r\n  Backdrop,\r\n  CircularProgress,\r\n  Container,\r\n  CssBaseline,\r\n  Grid,\r\n  IconButton,\r\n  List,\r\n  TextField,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport {Recorder} from 'react-voice-recorder'\r\nimport 'react-voice-recorder/dist/index.css'\r\nimport { EmojiTransportationOutlined, Send } from \"@material-ui/icons\";\r\nimport axios from \"axios\";\r\nimport moment from 'moment';\r\nimport ChatItem from \"../Components/ChatItem\";\r\nimport $ from 'jquery';\r\nconst Chat = require(\"twilio-chat\");\r\n\r\nrequire('dotenv').config();\r\n\r\nclass ChatScreen extends React.Component {\r\n  constructor(props) {\r\n    super(props); \r\n    this.state = {\r\n      audioDetails : {\r\n        url: null,\r\n        blob: null,\r\n        chunks: null,\r\n        duration: {\r\n        h: null,\r\n        m: null,\r\n        s: null,\r\n        }\r\n        },\r\n\r\n      text: \"\",\r\n      messages: [],\r\n      loading: false,\r\n      channel: null,\r\n      booking_chat_channel:[],\r\n      triggerMessage : false ,\r\n      triggerMessageSpecialist:true,\r\n      emailOwner:'',\r\n      chatmasterName :\"\",\r\n      booking_chat_channel:[],\r\n      booking_chat_channel2:[], \r\n      classAcitve:'chat-scroll',\r\n      queryBox:false,\r\n      queryString:'',\r\n      queryTime:'',\r\n      spec_image:'',\r\n      ocname:'',\r\n      oclastname:'',\r\n      ocimage:'assets/img/doctors/doctor-thumb-02.jpg',\r\n      uname :'',\r\n      sname:'',\r\n      uimage:'',\r\n      simage:'',\r\n      image_preview:null,\r\n      searchvalue:'',\r\n      userQueryImage:'assets/img/doctors/doctor-thumb-02.jpg',\r\n      refreshPage:false,\r\n      defaultImage:'assets/img/doctors/doctor-thumb-02.jpg',\r\n      specialist_login_time:'avatar avatar-away',\r\n      selectchatmemberid:'',\r\n     setIsUploading:false, \r\n      \r\n     \r\n    }; \r\n      \r\n    this.scrollDiv = React.createRef();\r\n  }\r\n\r\n \r\n\r\n  getToken = async (email) => { \r\n   \r\n    const response = await axios.get(process.env.REACT_APP_BASE_URL+`/chatAPI/token/`+email);\r\n    const { data } = response;\r\n    return data.token;\r\n  };\r\n\r\n  handleAudioStop(data) {\r\n   \r\n    this.setState({ audioDetails: data });\r\n  }\r\n\r\n\r\n\r\n\r\n   handleOnChange(value, audioname ){\r\n    \r\n     console.log(\"ajaysoni\");\r\n  }\r\n\r\n  customFunction()\r\n  {\r\n      \r\n  }\r\n\r\n async handleAudioUpload(file) {\r\n   \r\n   //alert(\"hello2\");\r\n    this.state.channel.sendMessage({\r\n        contentType: 'audio/webm',\r\n          media:file,\r\n      }); \r\nthis.setState({ setIsUploading: true });\r\n    \r\n    // Simulate audio upload process with setTimeout (replace with your actual upload mechanism)\r\n    setTimeout(() => {\r\n     this.setState({ setIsUploading: false }); // Set uploading state to false after some time (simulating upload completion)\r\n    }, 3000);\r\n\r\nif(!this.state.setIsUploading)\r\n{\r\n  document.querySelector('.MuiFormControl-root').style.display = 'block';\r\n\r\ndocument.querySelector('.MuiIconButton-root').style.display = 'block';\r\n\r\n\r\n document.querySelector('._1Pz2d').style.display = 'none';\r\ndocument.querySelector('._1ceqH ._1Yplu ._2gd2_').style.display = 'none';\r\ndocument.querySelector('._1YOWG').style.display = 'none';\r\n\r\nconst elementsToRemove = document.querySelectorAll('._qxztz');\r\nelementsToRemove.forEach(element => {\r\n  element.remove();\r\n});\r\n\r\n}\r\n\r\n // if (this.state.audioDetails.url.current) {\r\n //      // Access the recorder component using the ref and reset or reinitialize it as needed\r\n //      // For example, reset the recorder component state, stop any ongoing recordings, etc.\r\n //      this.state.audioDetails.url.current.reset(); // Assuming the recorder component has a reset method\r\n //    }\r\n    \r\n\r\nreturn false;\r\n   //await this.joinChannel(this.state.channel); \r\n   }\r\n\r\nhandleReset() {\r\n  const reset = {\r\n    url: null,\r\n    blob: null,\r\n    chunks: null,\r\n    duration: {\r\n      h: 0,\r\n      m: 0,\r\n      s: 0\r\n    }\r\n  };\r\n\r\nthis.setState({ audioDetails: reset });\r\n window.location.reload();\r\n\r\n}\r\n\r\n  handleChange(event) {\r\n    this.setState({searchvalue: event.target.value});\r\n  }\r\n\r\n\r\n\r\n  handleChange1(event) {   \r\n    const [file] = event.target.files\r\n    if (file) {\r\n      var  src = URL.createObjectURL(file) \r\n      this.setState({image_preview: src});\r\n    }\r\n }\r\n\r\n    getSpecialistStatus(specialistId)\r\n {\r\n  \r\n  axios.get(process.env.REACT_APP_BASE_URL+`/authenticationAPI/getspecialistStatus?specialistId=`+specialistId)\r\n    .then(res => {\r\n   \r\n\r\nif(parseInt(res.data)>parseInt(Date.now())){\r\n  \r\n      this.setState({specialist_login_time: 'avatar avatar-green'});\r\n      }\r\nelse\r\n{\r\n \r\n  this.setState({specialist_login_time: 'avatar avatar-away'});\r\n}\r\n\r\n     });  \r\n\r\n   }\r\n\r\n  componentDidMount = async () => {  \r\n\r\n\r\n  \r\n\r\n    this.setState({uname:this.props.name});\r\n    this.setState({uimage:this.props.path}); \r\n    this.setState({sname:this.props.c_name});\r\n    this.setState({simage:this.props.c_path}); \r\n    \r\n   \r\n\r\n    if(localStorage.getItem('customer_id')!=null){\r\n      localStorage.setItem('globaluserid',localStorage.getItem('customer_id'));\r\n      axios.get(process.env.REACT_APP_BASE_URL+`/customerAPI/GetCustomerChatChannel?customer_id=`+localStorage.getItem('customer_id'))\r\n      .then(res => { \r\n           this.setState({booking_chat_channel : res.data});  \r\n           if(res.data){ \r\n            this.setState({chatmasterName:'Dr.' +res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n            this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id1'],\"spec_\"+res.data[0]['specialist_id'],res.data[0]['user_id']);\r\n            this.setState({ loading: true });  \r\n          }\r\n       });   \r\n    }\r\n\r\n\r\n    if(localStorage.getItem('specialist_id')!=null){\r\n      localStorage.setItem('globalspecialistid',localStorage.getItem('specialist_id'));\r\n      axios.get(process.env.REACT_APP_BASE_URL+`/specilistAPI/GetSpecialistChatChannel?specialist_id=`+localStorage.getItem('specialist_id'))\r\n      .then(res => { \r\n           this.setState({booking_chat_channel2 : res.data});  \r\n          \r\n           if(res.data){ \r\n            this.setState({chatmasterName:res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n            this.chatfunction(res.data[0]['payment_stripe_id'],res.data[0]['twilio_chat_id2'],\"user_\"+res.data[0]['user_id'],res.data[0]['specialist_id']);\r\n            this.setState({ loading: true });  \r\n          }\r\n       });   \r\n    } \r\n\r\n        $( document ).ready(function() {\r\n\r\n\r\n\r\n\r\n document.querySelector('._1Pz2d').style.display = 'none';\r\ndocument.querySelector('._1ceqH ._1Yplu ._2gd2_').style.display = 'none';\r\ndocument.querySelector('._1YOWG').style.display = 'none';\r\ndocument.querySelector('._1ceqH ._f2DT8').style.display = 'none';\r\n\r\n     alert(\"hellow\");\r\n      \r\n      $(document).on('click', '._1dpop', function() {\r\n      \r\n alert(\"hello\");\r\n\r\ndocument.querySelector('.MuiFormControl-root').style.display = 'none';\r\n\r\ndocument.querySelector('.MuiIconButton-root').style.display = 'none';\r\n\r\n\r\n document.querySelector('._1Pz2d').style.display = 'block';\r\ndocument.querySelector('._1ceqH ._1Yplu ._2gd2_').style.display = 'block';\r\ndocument.querySelector('._1YOWG').style.display = 'block';\r\ndocument.querySelector('._1ceqH ._f2DT8').style.display = 'block';\r\n\r\n      })\r\n});\r\n  };\r\n\r\n\r\n \r\n\r\n  joinChannel = async (channel) => {\r\n      if (channel.channelState.status !== \"joined\") {\r\n        await channel.join();\r\n      }  \r\n    \r\n      channel.on(\"messageAdded\", this.handleMessageAdded);\r\n    \r\n  };\r\n\r\nselectchatmember(room)\r\n{\r\n  this.setState({selectchatmemberid : room}); \r\n}\r\n\r\n\r\n  chatfunction = async(room,email,id,nextID) => {\r\n\r\nthis.selectchatmember(room);\r\n\r\n  \r\nvar string=id;\r\nlocalStorage.setItem(\"onChangeId\", id);\r\nvar string_first_concate=string.toString().split(\"_\")[0];\r\nvar string_last_concate=string.toString().split(\"_\")[1]; \r\nlocalStorage.getItem('globaluserid');\r\nlocalStorage.getItem('globalspecialistid');\r\n\r\n\r\n\r\nif(string_first_concate=='user')\r\n{\r\n\r\n    axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(string_last_concate))\r\n    .then(res => {\r\n         this.setState({ocname : res.data[0]['first_name']}); \r\n         this.setState({oclastname : res.data[0]['last_name']}); \r\n         if(res.data[0]['user_image']!=null)\r\n         this.setState({ocimage : process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});\r\n         this.setState({sname : res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n         if(res.data[0]['user_image']!=null)\r\n         this.setState({simage : process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']});\r\n        });  \r\n }\r\n\r\n\r\n\r\nif(string_first_concate=='spec')\r\n{\r\n  axios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(string_last_concate))\r\n    .then(res => {\r\n          this.setState({ocname : res.data[0]['first_name']}); \r\n          this.setState({oclastname : res.data[0]['last_name']});\r\n          if(res.data[0]['profile_photo']!=null)\r\n          this.setState({ocimage : process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']}); \r\n\r\n          this.setState({sname : res.data[0]['first_name']+' '+res.data[0]['last_name']});  \r\n          if(res.data[0]['profile_photo']!=null)\r\n          this.setState({simage : process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']}); \r\n                  \r\n        }); \r\n\r\n}\r\n\r\n\r\n\r\n\r\nif(localStorage.getItem('globaluserid')!=null){ \r\n  axios.get(process.env.REACT_APP_BASE_URL+'/customerAPI/GetCustomerDetailsByID?customer_id='+parseInt(nextID))\r\n  .then(res => {\r\n       this.setState({uname : res.data[0]['first_name']+' '+res.data[0]['last_name']}); \r\n       if(res.data[0]['user_image']!=null)\r\n       this.setState({uimage : process.env.REACT_APP_BASE_URL+'/public/uploads/profile/'+res.data[0]['user_image']}); \r\n      });  \r\n}\r\n\r\nif(localStorage.getItem('globalspecialistid')!=null){\r\naxios.get(process.env.REACT_APP_BASE_URL+'/specilistAPI/GetSpecialistPrivateDetailsByID?specialist_id='+parseInt(localStorage.getItem('globalspecialistid')))\r\n.then(res => {\r\n    this.setState({uname : res.data[0]['first_name']+' '+res.data[0]['last_name']});  \r\n    this.setState({uimage : process.env.REACT_APP_BASE_URL+'/public/uploads/docs/profileresize/'+res.data[0]['profile_photo']}); \r\n  });  \r\n}\r\n   await axios.get(process.env.REACT_APP_BASE_URL+`/specilistAPI/GetUserQuery?payment_id=`+room)\r\n\t\t.then(res => {\r\n         if(res.data!=null){ \r\n           if(res.data[0]['specialist_query']!='null')\r\n            this.setState({queryBox : true});  \r\n\r\n            this.setState({queryString : res.data[0]['specialist_query']}); \r\n            if(res.data[0]['user_image']!=null)\r\n            this.setState({userQueryImage : res.data[0]['user_image']}); \r\n            this.setState({queryTime : true});  \r\n         }\r\n\t\t   \r\n\t\t}); \r\n \r\n\r\n //null 'null'\r\n \r\n    let token = \"\";\r\n    this.setState({emailOwner:email});\r\n    this.setState({ loading: true });  \r\n    this.setState({ classAcitve: 'chat-scroll-avtive' }); \r\n    try {\r\n      token = await this.getToken(email);\r\n   } catch {\r\n      throw new Error(\"unable to get token, please reload this page\");\r\n    } \r\n    const client = await Chat.Client.create(token);\r\n\r\n    client.on(\"tokenAboutToExpire\", async () => {\r\n      const token = await this.getToken(email);\r\n      client.updateToken(token);\r\n    });\r\n\r\n    client.on(\"tokenExpired\", async () => {\r\n      const token = await this.getToken(email);\r\n      client.updateToken(token);\r\n    });\r\n\r\n    client.on(\"channelJoined\", async (channel) => { \r\n     \r\n      const messages = await channel.getMessages(); \r\n      this.setState({ messages: messages.items || [] });\r\n      this.scrollToBottom();\r\n    }); \r\n\r\n    try {  \r\n      const channel = await client.getChannelByUniqueName(room);\r\n      await this.joinChannel(channel);\r\n      this.setState({ channel, loading: false });\r\n      this.setState({ classAcitve: 'chat-scroll' }); \r\n    } catch {\r\n      try {\r\n\r\n        const channel = await client.createChannel({\r\n          uniqueName: room,\r\n          friendlyName: room,\r\n        });\r\n        await this.joinChannel(channel);\r\n        this.setState({ channel, loading: false });\r\n        this.setState({ classAcitve: 'chat-scroll' }); \r\n      } catch(error) {\r\n          if (error.code) {\r\n            console.error(\"Error Code:\", error.code);\r\n          }\r\n          if (error.message) {\r\n            console.error(\"Error Message:\", error.message);\r\n          }\r\n        console.log(\"unable to create channel, please reload this page\"+error);\r\n      }\r\n    }\r\n  }\r\n  \r\n\r\n  handleMessageAdded = (message) => { \r\n    const { messages } = this.state;\r\n     if(message.author!==this.state.emailOwner)\r\n\r\n         if(message.media!=null && message.media.state.contentType=='audio/webm')\r\n   {\r\n    \r\n   \r\n   }\r\n     \r\n       if(this.state.triggerMessageSpecialist) {   \r\n        this.setState(\r\n          {\r\n            messages: !!messages ? [...messages, message] : [message],\r\n          },\r\n          this.scrollToBottom\r\n         );  \r\n         this.setState({triggerMessageSpecialist:false}); \r\n         this.setState({triggerMessage:true}); \r\n\r\n     }\r\n\r\n\r\n     if(this.state.triggerMessage) {   \r\n      this.setState(\r\n        {\r\n          messages: !!messages ? [...messages, message] : [message],\r\n        },\r\n        this.scrollToBottom\r\n       );  \r\n      // message.body = ''; \r\n       this.setState({triggerMessage:true}); \r\n       this.setState({triggerMessageSpecialist:true}); \r\n        \r\n   }\r\n    \r\n\r\n\r\n\r\n   \r\n  };\r\n\r\n  scrollToBottom = () => {\r\n     const messages = document.getElementById('asc');\r\n     let scrollHeight = messages.scrollHeight;\r\n     let height = messages.clientHeight;\r\n     let maxScrollTop = scrollHeight - height;\r\n     messages.scrollTop = maxScrollTop > 0 ? maxScrollTop : 0;\r\n  };\r\n\r\n    allErase = () => {\r\n      window.location.reload();\r\n  };\r\n\r\n \r\n\r\n  sendMessage = () => {\r\n    this.setState({recording_url:null});    \r\n    this.setState({image_preview:null});\r\n        const { text, channel,image } = this.state;  \r\n\r\n  if (text && String(text).trim()) \r\n  {\r\n    this.setState({ loading: true }, () => {\r\n         console.log(\"Loading state set to true\");\r\n    });\r\n    channel && channel.sendMessage(text).then(() => {\r\n      \r\n        this.setState({ text: \"\", loading: false }, () => {\r\n             console.log(\"Text reset and loading state set to false\");\r\n        });\r\n        this.setState({ triggerMessage: true }, () => {\r\n            console.log(\"Trigger message set to true\");\r\n        });\r\n    }).catch(error => {\r\n        console.error(\"Error sending message:\", error);\r\n    });\r\n}\r\n\r\n          else  {\r\n       const formData = new FormData();\r\n      formData.append('file', document.getElementById('formInputFile')[0].files[0]);\r\n\r\n      channel.sendMessage(formData);\r\n\r\n    }\r\n }\r\n\r\n\r\n  render() {\r\n    const { loading, text, messages, channel } = this.state;\r\n   // const { id,name,path,c_name,c_path} = this.props;\r\n    const { location } = this.props;\r\n    const { state } = location || {};  \r\n    const id= this.props.id;\r\n\r\n  \r\n\r\n    //  name=this.props.name; \r\n   // const path= this.props.path;\r\n   // const c_name=this.props.c_name;\r\n   // const c_path=this.props.c_path;\r\n \r\n\r\n    // console.log('loading'); \r\n    // console.log(loading);\r\n\r\n    return (\r\n      <React.Fragment>\r\n      <div className=\"chat-cont-left\">\r\n      <div className=\"chat-header\">\r\n        <span>Chats</span>\r\n       \r\n      </div>\r\n      <form className=\"chat-search\">\r\n        <div className=\"input-group\">\r\n          <div className=\"input-group-prepend\">\r\n            <i className=\"fas fa-search\"></i>\r\n          </div>\r\n          <input type=\"text\" className=\"form-control\" placeholder=\"Search\"  onChange={this.handleChange.bind(this)} />\r\n        </div>\r\n      </form>\r\n      <div className=\"chat-users-list\">\r\n      <div className=\"chat-scroll\" >  \r\n\r\n {this.state.booking_chat_channel.filter( (channel)=> {  \r\n    \t\r\n\r\n //return (this.state.searchvalue===null||this.state.searchvalue===undefined ||this.state.searchvalue==='')?channel:channel.first_name.toLowerCase()===this.state.searchvalue.toLowerCase();\r\n return (this.state.searchvalue===null || this.state.searchvalue===undefined  ||this.state.searchvalue==='')?channel: (channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) || channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) ||  (channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase()));\r\n   }).map( (channel)=> ( \r\n\r\n      \r\n<a href=\"javascript:void(0);\"  className={channel['twilio_chat_id1'].includes(this.state.selectchatmemberid)?'media  selectedchatmember':'media  '}  onClick={()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id1'],'spec_'+channel['specialist_id'],channel['user_id'])}>\r\n         <div className=\"media-img-wrap specilaist\">\r\n             \r\n            <p className=\"demopart\">{ setInterval(() => {this.getSpecialistStatus(channel['specialist_id'])}, 60000*1.2)}</p>\r\n              \r\n           <div className={this.state.specialist_login_time} id=\"user_part\">\r\n           \r\n\r\n             <img src={channel['profile_photo']!=null?`${process.env.REACT_APP_BASE_URL}/public/uploads/docs/profileresize/${channel['profile_photo']}` : this.state.defaultImage} alt={channel['first_name'] +' '+channel['last_name']} className=\"avatar-img rounded-circle\" />\r\n           </div>\r\n         </div>\r\n         <div className=\"media-body\">\r\n           <div>\r\n             <div className=\"user-name\">\r\n \r\n\r\n  {channel['first_name']} {channel['last_name']}</div> \r\n             <div className=\"user-name\">\r\n { localStorage.getItem('UserTimezone')!=null ? (channel['session_date']!='')?moment.utc(channel['session_date']).tz(localStorage.getItem('UserTimezone')).format('D MMM YYYY h:mm A'):'-' : moment(channel['session_date']).format('D MMM YYYY h:mm A') }\r\n             </div> \r\n             <div className=\"user-last-chat\">\r\n                  {channel['last_message']} \r\n              </div>\r\n           </div>\r\n           <div>\r\n             <div className=\"last-chat-time block\"></div>\r\n             <div className=\"badge badge-success badge-pill\"></div>\r\n           </div>\r\n         </div>\r\n </a>\r\n\r\n\r\n))}\r\n\r\n\r\n{this.state.booking_chat_channel2.filter( (channel)=> {  \r\n return (this.state.searchvalue===null || this.state.searchvalue===undefined  ||this.state.searchvalue==='')?channel: (channel.first_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) || channel.last_name.toLowerCase().includes(this.state.searchvalue.toLowerCase()) ||  (channel.first_name+' '+channel.last_name).toLowerCase().includes(this.state.searchvalue.toLowerCase()));\r\n   }).map( (channel)=> (\t  \r\n             <a href=\"javascript:void(0);\" className={channel['twilio_chat_id2'].includes(this.state.selectchatmemberid)?'media  selectedchatmember':'media  '}  onClick={()=>this.chatfunction(channel['payment_stripe_id'],channel['twilio_chat_id2'],'user_'+channel['user_id'],channel['specialist_id'])}>\r\n                      <div className=\"media-img-wrap\">\r\n                         <div className=\"avatar avatar-away\" id=\"specialist_part\">\r\n                           {channel['user_image'] && channel['user_image']!=null ?\r\n                           <img src={`${process.env.REACT_APP_BASE_URL}/public/uploads/profile/${channel['user_image']}`} alt={channel['first_name'] +' '+channel['last_name']} className=\"avatar-img rounded-circle\" />:\r\n                           <img src={`${process.env.REACT_APP_URL}/assets/img/doctors/doctor-thumb-02.jpg`} alt=\"User Image\" className=\"avatar-img rounded-circle\" />\r\n                          }\r\n                         </div>\r\n                      </div>\r\n                      <div className=\"media-body\">\r\n                        <div>\r\n                          <div className=\"user-name\">{channel['first_name'] +' '+channel['last_name']}\r\n                          </div>\r\n                                <div className=\"user-name\">\r\n                                { localStorage.getItem('SpecialistTimezone')!=null ? (channel['session_date']!='')?moment.utc(channel['session_date']).tz(localStorage.getItem('SpecialistTimezone')).format('D MMM YYYY h:mm A'):'-' : moment(channel['session_date']).format('D MMM YYYY h:mm A') }\r\n \r\n             </div>\r\n                        </div>\r\n                   \r\n                        <div>\r\n                          <div className=\"last-chat-time block\"></div>\r\n                          <div className=\"badge badge-success badge-pill\"></div>\r\n                        </div>\r\n                      </div>\r\n              </a>\r\n\r\n      ))}\r\n\r\n              \r\n\r\n\r\n              \r\n        </div>\r\n       </div>\r\n    </div>\r\n    <div className=\"chat-cont-right\">\r\n   \r\n       \r\n    <div className=\"chat-header\">\r\n                  <a id=\"back_user_list\" href=\"javascript:void(0)\" className=\"back-user-list\">\r\n                    <i className=\"material-icons\">chevron_left</i>\r\n                  </a>\r\n                  <div className=\"media\">\r\n                    <div className=\"media-img-wrap\">\r\n                      <div className={this.state.specialist_login_time}>\r\n                         <img src={`${this.state.ocimage}`} alt=\"User Image22\" className=\"avatar-img rounded-circle\" />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"media-body\">\r\n                      <div className=\"user-name\">  \r\n                       <div className=\"user-name\"\r\n                       > {this.state.ocname+' '+this.state.oclastname}\r\n                      \r\n                      \r\n                      <div className=\"input-group-prepend\">\r\n                        <div className=\"btn-file btn\">\r\n                          <i className=\"fa fa-paperclip\"></i>\r\n                          <form id=\"formInputFile\">\r\n                             <input type=\"file\" id=\"rimage\" onChange={this.handleChange1.bind(this)}/>  \r\n                          </form>\r\n                        </div>\r\n\r\n                         </div>\r\n                         \r\n                          </div>\r\n                       </div>\r\n                   \r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"input-group-prepend\"> \r\n                    </div>\r\n\r\n                 \r\n                </div>\r\n   \r\n  <div className=\"chat-body\">  \r\n\r\n    <div className={this.state.classAcitve}  id=\"asc\"> \r\n    {this.state.queryBox && this.state.queryBox!='null' ?\r\n    <li className=\"MuiListItem-root tets MuiListItem-gutters\"><div>\r\n        <div style={styles.author}>\r\n            <div className=\"avatar\">\r\n              <img src={this.state.userQueryImage} alt=\"User Image22\" className=\"avatar-img rounded-circle\" />\r\n            </div> \r\n            {this.state.ocname+' '+this.state.oclastname}\r\n         </div>\r\n         {(this.state.queryString && this.state.queryString!=null)  ?\r\n          <div style={styles.container}>\r\n              {(this.state.queryString && this.state.queryString!=null && this.state.queryString!=null)  ? this.state.queryString  : '' } \r\n              <div className=\"chat-time\"> \r\n              {(this.state.queryString!=null)  ? this.state.queryTime  : '' }\r\n              </div>\r\n           </div>\r\n           : ''}\r\n     \r\n         </div>\r\n\r\n         <div>\r\n       \r\n      </div></li>:''\r\n      } \r\n\r\n\r\n\r\n   {messages &&  messages.map((message) => ( \r\n              \r\n\r\n\r\n                  <ChatItem\r\n                      key={message.index}\r\n                      message={message}\r\n                      email={this.state.emailOwner}\r\n                      id={id}\r\n                      name={this.state.emailOwner==message.author?this.state.uname:'goud deepak'}\r\n                      path={this.state.emailOwner==message.author?this.state.uimage:'deepak goud'}\r\n                      c_name={this.state.sname}\r\n                      c_path={this.state.simage} \r\n                  />\r\n              ))}  \r\n              </div>\r\n           </div> \r\n\r\n           <div className=\"chat-footer\">\r\n           {this.state.setIsUploading && <div>Loading Audio...</div>}\r\n           <div className=\"input-group d-flex \"> \r\n           {/* Display loader while uploading */\r\n\r\n\r\n           }\r\n     \r\n      \r\n \r\n           <Recorder\r\n            record={true}\r\n            title={\"New recording\"}\r\n            audioURL={this.state.audioDetails.url}\r\n            showUIAudio={true}\r\n            handleAudioStop={data => this.handleAudioStop(data)}\r\n            handleOnChange={(value) => this.customFunction()}\r\n            handleAudioUpload={data => this.handleAudioUpload(data)}\r\n            handleReset={() => this.handleReset()}\r\n            /> \r\n           \r\n\r\n             {(this.state.image_preview===undefined || this.state.image_preview===null)  ? <TextField id=\"text_field\" required className=\"form-control box_sm\" placeholder=\"Type Here\" multiline rows={2} value={text} disabled={!channel} onChange={(event) =>this.setState({ text: event.target.value })}/>:<img src={this.state.image_preview} style={{'height':'45px'}}   id=\"preview_image\" /> }\r\n\r\n              <IconButton\r\n                style={styles.sendButton}\r\n                onClick={this.sendMessage}\r\n                // disabled={!channel || !text}\r\n              >\r\n               <Send style={styles.sendIcon} />\r\n              </IconButton> \r\n              </div>\r\n              </div>\r\n    <div>\r\n\r\n  \r\n    </div>\r\n   </div>\r\n   \r\n    </React.Fragment>\r\n     \r\n    );\r\n  }\r\n}\r\n\r\nconst styles = {\r\n  container :{\r\n    maxWidth: \"75%\",\r\n    borderRadius: 12,\r\n    padding: 16,\r\n    color: \"black\",\r\n    fontSize: 12,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  textField: { width: \"100%\", borderWidth: 0, borderColor: \"transparent\" },\r\n  textFieldContainer: { flex: 1, marginRight: 12 },\r\n  gridItem: { paddingTop: 12, paddingBottom: 12 },\r\n  gridItemChatList: { overflow: \"auto\", height: \"70vh\" },\r\n  gridItemMessage: { marginTop: 12, marginBottom: 12 },\r\n  sendButton: { backgroundColor: \"#0de0fe\",width:\"7%\",height:\"50px\"},\r\n  sendIcon: { color: \"white\" },\r\n  mainGrid: { paddingTop: 100, borderWidth: 1 }, \r\n  author: { fontSize: 10, color: \"gray\" },\r\n};\r\n\r\n\r\n\r\nexport default ChatScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}