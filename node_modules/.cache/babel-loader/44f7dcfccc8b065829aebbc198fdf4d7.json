{"ast":null,"code":"import React from\"react\";import{ListItem}from\"@material-ui/core\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";require('dotenv').config();class ChatItem extends React.Component{constructor(props){super(props);this.formatAMPM=date=>{var hours=date.getHours();var minutes=date.getMinutes();var ampm=hours>=12?'pm':'am';hours=hours%12;hours=hours?hours:12;// the hour '0' should be '12'\nminutes=minutes<10?'0'+minutes:minutes;var strTime=hours+':'+minutes+' '+ampm;return strTime;};this.state={urldata:\"\",fname:\"\",mediaUrl:\"\",audioUrl:\"\"};}componentDidMount(){const{message,email,id,name,path,c_name,c_path}=this.props;if(message.media){if(message.media.contentType=='image/png'||message.media.contentType=='image/jpeg'){axios.get(process.env.REACT_APP_BASE_URL+'/authenticationAPI/TwilioApi?media='+message.media.sid).then(res=>{this.setState({mediaUrl:res.data.links.content_direct_temporary});// this.setState({mediaUrl:\"\"})\n});}else{console.log(process.env.REACT_APP_BASE_URL+'/authenticationAPI/TwilioApi?media='+message.media.sid);axios.get(process.env.REACT_APP_BASE_URL+'/authenticationAPI/TwilioApi?media='+message.media.sid).then(res=>{this.setState({audioUrl:res.data.links.content_direct_temporary});// this.setState({audioUrl:\"\"})\n});}}}render(){const{message,email,id,name,path,c_name,c_path,MediaKey,Media}=this.props;const isOwnMessage=message.author===email;let MediaData=this.state.mediaUrl;let AudioData=this.state.audioUrl;return/*#__PURE__*/_jsxs(ListItem,{className:\"tets\",style:styles.listItem(isOwnMessage),children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.author,children:[/*#__PURE__*/_jsx(\"div\",{class:\"avatar\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(isOwnMessage?path:c_path),alt:\"User Image\",class:\"avatar-img rounded-circle\"})}),\"\".concat(isOwnMessage?name:c_name)]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.container(isOwnMessage),children:[message.body===null?AudioData!=''?/*#__PURE__*/_jsx(\"audio\",{controls:true,children:/*#__PURE__*/_jsx(\"source\",{src:AudioData})}):/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(MediaData),alt:MediaData,style:{width:'100px',height:'60px'}}):message.body,/*#__PURE__*/_jsxs(\"div\",{className:\"chat-time\",children:[message.media===null?'':/*#__PURE__*/_jsx(\"div\",{class:\"chat-msg-attachments\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"chat-attachment\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(this.state.urldata)}),/*#__PURE__*/_jsx(\"div\",{class:\"chat-attach-caption\",children:this.state.fname}),/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(this.state.urldata+'?force=true'),target:\"_blank\",class:\"chat-attach-download\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-download\"})})]})}),this.formatAMPM(new Date(message.dateCreated))//new Date(message.dateCreated.toISOString()).toLocaleString()\n]})]})]});}}const styles={listItem:isOwnMessage=>({flexDirection:\"column\",alignItems:isOwnMessage?\"flex-end\":\"flex-start\"}),container:isOwnMessage=>({maxWidth:\"75%\",borderRadius:12,padding:16,color:\"black\",fontSize:12,backgroundColor:isOwnMessage?\"#e3e3e3\":\"#fff\"}),author:{fontSize:10,color:\"gray\"},timestamp:{fontSize:8,color:\"white\",textAlign:\"right\",paddingTop:4}};export default ChatItem;","map":{"version":3,"names":["React","ListItem","axios","jsx","_jsx","jsxs","_jsxs","require","config","ChatItem","Component","constructor","props","formatAMPM","date","hours","getHours","minutes","getMinutes","ampm","strTime","state","urldata","fname","mediaUrl","audioUrl","componentDidMount","message","email","id","name","path","c_name","c_path","media","contentType","get","process","env","REACT_APP_BASE_URL","sid","then","res","setState","data","links","content_direct_temporary","console","log","render","MediaKey","Media","isOwnMessage","author","MediaData","AudioData","className","style","styles","listItem","children","class","src","concat","alt","container","body","controls","width","height","href","target","Date","dateCreated","flexDirection","alignItems","maxWidth","borderRadius","padding","color","fontSize","backgroundColor","timestamp","textAlign","paddingTop"],"sources":["C:/xampp/htdocs/MedalohaLivePush/Medaloha_Dev_Local/src/pages/Components/ChatItem.js"],"sourcesContent":["import React from \"react\";\r\nimport { ListItem } from \"@material-ui/core\";\r\nimport axios from \"axios\";\r\nrequire('dotenv').config();\r\nclass ChatItem extends React.Component {\r\nconstructor(props) {\r\n  super(props);\r\n this.state = {\r\n    urldata:\"\",\r\n    fname:\"\"  ,\r\n    mediaUrl:\"\",\r\n    audioUrl:\"\"\r\n   } \r\n}\r\n    formatAMPM= (date)=> {\r\n    var hours = date.getHours();\r\n    var minutes = date.getMinutes();\r\n    var ampm = hours >= 12 ? 'pm' : 'am';\r\n    hours = hours % 12;\r\n    hours = hours ? hours : 12; // the hour '0' should be '12'\r\n    minutes = minutes < 10 ? '0'+minutes : minutes;\r\n    var strTime = hours + ':' + minutes + ' ' + ampm;\r\n    return strTime;\r\n  }\r\n\r\n  componentDidMount(){\r\n    const { message, email,id,name,path,c_name,c_path} = this.props;\r\n    \r\n         if(message.media){\r\n        if(message.media.contentType=='image/png' || message.media.contentType=='image/jpeg' ){\r\n          axios.get(process.env.REACT_APP_BASE_URL+'/authenticationAPI/TwilioApi?media='+message.media.sid)\r\n          .then(res => { \r\n\r\n\r\n            \r\n                this.setState({mediaUrl:res.data.links.content_direct_temporary})\r\n               // this.setState({mediaUrl:\"\"})\r\n           });  \r\n        } else {\r\n   \r\n          console.log(process.env.REACT_APP_BASE_URL+'/authenticationAPI/TwilioApi?media='+message.media.sid);\r\n          axios.get(process.env.REACT_APP_BASE_URL+'/authenticationAPI/TwilioApi?media='+message.media.sid)\r\n          .then(res => { \r\n                this.setState({audioUrl:res.data.links.content_direct_temporary})\r\n               // this.setState({audioUrl:\"\"})\r\n           });  \r\n        }\r\n      \r\n       }\r\n       \r\n   }\r\n\r\n\r\n  render() { \r\n     const { message, email,id,name,path,c_name,c_path,MediaKey,Media } = this.props;\r\n     const isOwnMessage = message.author === email;   \r\n        let  MediaData =  this.state.mediaUrl;\r\n        let  AudioData =  this.state.audioUrl;\r\n    return ( \r\n      <ListItem  className=\"tets\" style={styles.listItem(isOwnMessage)}>\r\n        <div  style={styles.author}> \r\n             <div class=\"avatar\">\r\n                  <img src={`${isOwnMessage?path:c_path}`}  alt=\"User Image\" class=\"avatar-img rounded-circle\"/> \r\n              </div>\r\n            {`${isOwnMessage?name:c_name}`}\r\n        </div>\r\n           <div style={styles.container(isOwnMessage)}>\r\n           {\r\n            message.body===null?(AudioData!='')?<audio controls ><source src={AudioData} /></audio>:<img src={`${MediaData}`} alt={MediaData} style={{width:'100px',height:'60px'}} />:message.body\r\n\r\n            }\r\n          <div className=\"chat-time\">\r\n          {(message.media===null)?'':<div class=\"chat-msg-attachments\"><div class=\"chat-attachment\"><img src={`${this.state.urldata}`} /><div class=\"chat-attach-caption\">{this.state.fname}</div><a href={`${this.state.urldata+'?force=true'}`} target=\"_blank\" class=\"chat-attach-download\"><i class=\"fas fa-download\"></i></a></div></div>}\r\n            {  \r\n             this.formatAMPM(new Date(message.dateCreated)) \r\n             //new Date(message.dateCreated.toISOString()).toLocaleString()\r\n            }\r\n          </div>\r\n        </div>\r\n      </ListItem>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = {\r\n  listItem: (isOwnMessage) => ({\r\n    flexDirection: \"column\",\r\n    alignItems: isOwnMessage ? \"flex-end\" : \"flex-start\",\r\n  }),\r\n  container: (isOwnMessage) => ({\r\n    maxWidth: \"75%\",\r\n    borderRadius: 12,\r\n    padding: 16,\r\n    color: \"black\",\r\n    fontSize: 12,\r\n    backgroundColor: isOwnMessage ? \"#e3e3e3\" : \"#fff\",\r\n  }),\r\n  author: { fontSize: 10, color: \"gray\" },\r\n  timestamp: { fontSize: 8, color: \"white\", textAlign: \"right\", paddingTop: 4 },\r\n};\r\n\r\nexport default ChatItem;"],"mappings":"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"},"metadata":{},"sourceType":"module"}